(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"0db5":function(e,t,a){e.exports={container:"container___WsyHI",list:"list___3tCLx",toolbar:"toolbar___2_BY_",title:"title___2yx3-"}},"0pL4":function(e,t,a){e.exports={container:"container___1VGr-",list:"list___2eEcA",menuItem:"menuItem___P2Kdu",menu:"menu___3K7_5",noteTitle:"noteTitle___27vxM",active:"active___nuHWV"}},"3eer":function(e,t,a){e.exports={main:"main___szT1f",tabPane:"tabPane___2IdiP",btn:"btn___OfdW7",toggler:"toggler___1YkjS",active:"active___1tAVZ",menuBtn:"menuBtn___1NwFz",menuActive:"menuActive___1Smsu",tab:"tab___1chI2",title:"title___AsEuC",buttons:"buttons___3ckzr",content:"content___20fv5",fav:"fav___1iMS-",isMobile:"isMobile___3xC2E",toolbar:"toolbar___JdnWx"}},"G/16":function(e,t,a){e.exports={main:"main___2CQ3t",container:"container___rx9Zr",content:"content___244uc",isMobile:"isMobile___2oOvD"}},"L+oi":function(e,t,a){e.exports=a.p+"static/diamond.fded64d5.svg"},MjzT:function(e,t,a){"use strict";a.r(t);var n=a("tJVT"),c=a("q1tI"),o=a.n(c),r=a("9kvl"),i=a("G/16"),l=a.n(i),s=(a("qVdP"),a("jsC+")),u=(a("+L6B"),a("2/Rp")),d=a("9og8"),m=a("k1fw"),f=(a("/xke"),a("TeRw")),p=(a("lUTK"),a("BvKs")),v=(a("2qtc"),a("kLXV")),b=a("WmNS"),_=a.n(b),h=a("RCxd"),E=a("uqfK"),y=a("GZ0F"),N=a("0db5"),O=a.n(N),j=a("KDh5"),g=(a("5NDa"),a("5rEg")),k=a("oBTY"),M=(a("y8nQ"),a("Vl3Y")),x=a("mAF4"),w=a("7rd8"),C=a("xvlK"),S=a("mcit"),I=a.n(S),T=a("QfEt"),L=M["a"].Item,P={},D=function(e,t){var a=Object(c["useState"])(!1),r=Object(n["a"])(a,2),i=r[0],l=r[1],f=M["a"].useForm(),b=Object(n["a"])(f,1),h=b[0];if(e.visible&&!i){l(!0);var E=e.node||{};h.setFieldsValue({foldName:E.name}),P=Object(m["a"])({id:E.key},E)}var y=function(t){var a=t.key;if("1"==a)l(!0),h.setFieldsValue({foldName:""}),P={parentId:e.noteMenu.listParentNote.id,isLeaf:!1};else{var n={id:"new",name:"\u65b0\u6587\u6863",parentId:e.noteMenu.listParentNote.id,isLeaf:!0};e.dispatch({type:"note/refreshOpenedNote",payload:n}),e.dispatch({type:"note/refreshOpenedNotes",payload:[n].concat(Object(k["a"])(e.note.openedNotes))}),e.isMobile&&e.dispatch({type:"note/refreshShowMenu",payload:!1})}},N=o.a.createElement(p["a"],{onClick:y},o.a.createElement(p["a"].Item,{key:"1",icon:o.a.createElement(x["a"],null)},"\u6587\u4ef6\u5939"),o.a.createElement(p["a"].Item,{key:"2",icon:o.a.createElement(w["a"],null)},"\u7b14\u8bb0")),O=function(){var t=Object(d["a"])(_.a.mark((function t(){var a,n;return _.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h.validateFields();case 2:a=t.sent,n=a.foldName,e.dispatch({type:"note/updateNoteTitle",payload:Object(m["a"])(Object(m["a"])({},P),{},{name:n})}),e.onCancel(),l(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),j=function(){return o.a.createElement("div",{className:e.className},o.a.createElement("div",{className:I.a.toolbar},o.a.createElement(s["a"],{overlay:N,trigger:["click"]},o.a.createElement(u["a"],{type:"primary",shape:"round",icon:o.a.createElement(C["a"],null)},"\u589e\u52a0"))),o.a.createElement(v["a"],{title:"\u8bf7\u8f93\u5165\u6587\u4ef6\u5939\u540d\u79f0...",visible:i,onOk:O,onCancel:function(){e.onCancel(),l(!1)}},o.a.createElement(M["a"],{form:h},o.a.createElement(L,{name:"foldName",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6587\u4ef6\u5939\u540d\u79f0!"}]},o.a.createElement(g["a"],{prefix:o.a.createElement(x["a"],null)})))))};return j()},R=Object(T["a"])(Object(r["b"])((function(e){var t=e.note,a=e.noteMenu,n=e.loading;return{note:t,noteMenu:a,loading:n}}))(D)),B=a("lkk+"),K=a("/MfK"),F=a("0pL4"),A=a.n(F),q=v["a"].confirm,H=50,V=function(e,t){var a=Object(c["useState"])(!1),r=Object(n["a"])(a,2),i=r[0],l=r[1],s=Object(c["useState"])(1),d=Object(n["a"])(s,2),p=d[0],v=d[1],b=Object(c["useState"])([]),_=Object(n["a"])(b,2),E=_[0],y=_[1],N=Object(c["useState"])(!1),O=Object(n["a"])(N,2),j=O[0],g=O[1];Object(c["useEffect"])((function(){M(1)}),[e.params]);var M=function(t){var a=e.getDataMethod,n=e.params;a&&(g(!0),a(Object(m["a"])(Object(m["a"])({pageSize:H},n),{},{pageNo:t})).then((function(e){var a,n=e.result,c=e.success;if(g(!1),c){if(n instanceof Array)a=n;else{var o=n.records,r=n.total,i=n.current;a=1==i?o:[].concat(Object(k["a"])(E),Object(k["a"])(o));var s=r>a.length;l(s),v(t)}w(a)}})))};Object(c["useEffect"])((function(){w(E)}),[e.sortType]);var w=function(t){var a=e.sortType;a&&("default"==a?t=t.sort((function(e,t){return e.isLeaf-t.isLeaf})):"date"==a?t=t.sort((function(e,t){return e.updateTime<t.updateTime?1:-1})):"name"==a&&(t=t.sort((function(e,t){return e.name>t.name})))),y(Object(k["a"])(t))},C=function(t){var a=e.isMobile;if(t.isLeaf){var n=e.note.openedNote;n.id!=t.id&&e.dispatch({type:"note/openNote",payload:t.id}),a&&e.dispatch({type:"note/refreshShowMenu",payload:!1})}else{var c=e.noteMenu.listParentNote;c.id!=t.id&&e.dispatch({type:"noteMenu/refreshListParentNote",payload:t})}},S=function(t,a){t.preventDefault(),t.stopPropagation(),q({title:"\u786e\u5b9a\u8981\u5220\u9664 ".concat(a.name,"?"),icon:o.a.createElement(h["a"],null),onOk:function(){e.dispatch({type:"note/deleteNote",payload:a}).then((function(){f["default"]["info"]({message:"\u5220\u9664\u6210\u529f"}),M(1)}))}})},I=function(e){var t=e.key||e.id,a=e.title||e.name;return Object(m["a"])(Object(m["a"])({},e),{},{id:t,title:a})},T=function(){M(p+1)},L=function(){var t=e.note.openedNote,a=e.data,n=void 0===a?E:a,c=e.noDelete;return o.a.createElement("div",{className:A.a.container,style:e.style},o.a.createElement("div",{className:A.a.list},o.a.createElement("ul",null," ",n.map((function(e){var a=I(e),n=a.id,r=a.title,i=t.id==n;return o.a.createElement("li",{key:n},o.a.createElement("div",{className:"".concat(A.a.menuItem," ").concat(i?A.a.active:""),onClick:function(){return C(e)}},e.isLeaf?o.a.createElement(B["a"],null):o.a.createElement(x["a"],null),o.a.createElement("div",{className:A.a.noteTitle,draggable:!0},"\xa0\xa0",r),c?"":o.a.createElement("div",{className:A.a.menu,onClick:function(e){return S(e,a)}},o.a.createElement(K["a"],null))))})),i?o.a.createElement("li",null,o.a.createElement(u["a"],{type:"link",loading:j,onClick:T},"\u52a0\u8f7d\u66f4\u591a")):"")))};return L()},z=Object(T["a"])(Object(r["b"])((function(e){var t=e.note,a=e.noteMenu,n=e.loading;return{note:t,noteMenu:a,loading:n}}))(V)),G=(v["a"].confirm,function(e,t){var a=Object(c["useState"])(!1),r=Object(n["a"])(a,2),i=r[0],l=r[1],m=Object(c["useState"])({}),f=Object(n["a"])(m,2),v=f[0],b=f[1],h=Object(c["useState"])("default"),N=Object(n["a"])(h,2),g=N[0],k=N[1];Object(c["useEffect"])((function(){M()}),[e.noteMenu.listParentNote]),Object(c["useEffect"])((function(){M()}),[e.note.listKey]);var M=function(){var t=e.noteMenu.listParentNote.id;k("default"),b({parentId:t})},x=function(e){k(e.key)},w=o.a.createElement(p["a"],{onClick:x},o.a.createElement(p["a"].Item,{key:"default"},"\u9ed8\u8ba4\u6392\u5e8f"),o.a.createElement(p["a"].Item,{key:"date"},"\u6309\u65f6\u95f4\u6392\u5e8f"),o.a.createElement(p["a"].Item,{key:"name"},"\u6309\u540d\u79f0\u6392\u5e8f")),C=function(){var t=Object(d["a"])(_.a.mark((function t(){var a,n,c,o,r=arguments;return _.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=r.length>0&&void 0!==r[0]&&r[0],c=e.noteMenu.listParentNote.parentId,a||0==c){t.next=7;break}return t.next=5,Object(j["f"])(c);case 5:o=t.sent,n=o.result;case 7:e.dispatch({type:"noteMenu/refreshListParentNote",payload:n});case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),S=function(){var t=e.noteMenu.listParentNote,a="0"==t.id;return o.a.createElement("div",{className:O.a.container},o.a.createElement(R,{visible:i,node:{},onCancel:function(){return l(!1)}}),o.a.createElement("div",{className:O.a.toolbar},o.a.createElement(u["a"],{type:"text",disabled:a,onClick:function(){return C()}},o.a.createElement("span",{className:"iconfont"},"\ue7c3")),o.a.createElement("span",{className:O.a.title},t.name||"\u6240\u6709\u7b14\u8bb0"),a?o.a.createElement("div",null):o.a.createElement(u["a"],{type:"text",disabled:a,onClick:function(){return C(!0)}},o.a.createElement(E["a"],null)),o.a.createElement(s["a"],{overlay:w,trigger:["click"]},o.a.createElement(u["a"],{type:"text"},o.a.createElement(y["a"],null)))),o.a.createElement("div",{className:O.a.list},o.a.createElement(z,{getDataMethod:j["e"],params:v,sortType:g})))};return S()}),W=Object(r["b"])((function(e){var t=e.note,a=e.noteMenu,n=e.loading;return{note:t,noteMenu:a,loading:n}}))(G),J=(a("Znn+"),a("ZTPi")),Q=a("uMRc"),Y=a("u2V1"),U=a("ye1Q"),Z=a("p8w8"),X=a("djQt"),$=a("Tm+p"),ee=a("G3dp"),te=a("9BLJ"),ae=a("2BaD"),ne=a("3eer"),ce=a.n(ne),oe=a("c+yx"),re=a("ddak"),ie=a.n(re),le=a("4i/N"),se=a("ZM0C"),ue=(a("i8oR"),a("DlQD")),de=a.n(ue),me=a("FIf5"),fe=a.n(me),pe=(a("R5gG"),a("fWQN")),ve=a("mtLc"),be=(a("5GOC"),a("JsLm")),_e=a("LvDl"),he=be["a"].Link,Ee=function(){function e(){var t=this;Object(pe["a"])(this,e),this.anchors=void 0,this.tocItems=[],this.i=0,this.reset=function(){t.tocItems=[],t.anchors=[],t.i=0},this.i=0,this.anchors=[],this.tocItems=[]}return Object(ve["a"])(e,[{key:"add",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=(a||e)+this.i++;this.anchors.push(n);var c={anchor:n,level:t,text:e},o=this.tocItems;if(0===o.length)o.push(c);else{var r=Object(_e["last"])(o);if(c.level>r.level)for(var i=r.level+1;i<=6;i++){var l=r,s=l.children;if(!s){r.children=[c];break}if(r=Object(_e["last"])(s),c.level<=r.level){s.push(c);break}}else o.push(c)}return n}},{key:"renderToc",value:function(e){var t=this;return e.map((function(e){return o.a.createElement(he,{key:e.anchor,href:"#".concat(e.anchor),title:e.text},e.children&&t.renderToc(e.children))}))}},{key:"render",value:function(){return o.a.createElement(be["a"],{affix:!1,showInkInFixed:!0},this.renderToc(this.tocItems))}}]),e}(),ye=new Ee,Ne=new de.a.Renderer;Ne.heading=function(e,t,a){var n=ye.add(e,t);return'<a id="'.concat(n,'" href="#').concat(n,'" class="anchor-fix"><h').concat(t,">").concat(e,"</h").concat(t,"></a>\n")},de.a.setOptions({renderer:Ne,highlight:function(e){return fe.a.highlightAuto(e).value},gfm:!0,pedantic:!1,sanitize:!1,tables:!0,breaks:!1,smartLists:!1,smartypants:!1}),se["b"].use(se["a"].TabInsert,{tabMapValue:1});var Oe=o.a.forwardRef((function(e,t){var a=Object(c["useState"])(""),r=Object(n["a"])(a,2),i=r[0],l=r[1],s=Object(c["useState"])(""),u=Object(n["a"])(s,2),m=u[0],f=u[1];Object(c["useEffect"])((function(){var t=e.note.openedNote.text||"";l(t),h(t),e.setShowToc(!1)}),[e.note.openedNote]);var p=function(t){t.html;var a=t.text;l(a),e.handleChange()},v=function(){e.saveContent(i)},b=function(e,t){var a=new FileReader;a.onload=Object(d["a"])(_.a.mark((function e(){var n,c;return _.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=function(e){var t=e.split(","),a=t[0].match(/:(.*?);/)[1],n=atob(t[1]),c=n.length,o=new Uint8Array(c);while(c--)o[c]=n.charCodeAt(c);return new Blob([o],{type:a})},n(a.result),e.next=4,Object(j["k"])(a.result);case 4:c=e.sent,c.success?t(c.result):console.log(c.message);case 6:case"end":return e.stop()}}),e)}))),a.readAsDataURL(e)},h=function(e){ye.reset();var t=de()(e);return f(t),t},E=function(){var t=e.displayIndex,a=e.showToc,n=e.setShowToc,c=e.isMobile;return o.a.createElement(o.a.Fragment,null,1==t?o.a.createElement("div",{className:ie.a.text,style:{display:1==t?"block":"none"}},o.a.createElement(se["b"],{value:i,renderHTML:h,onChange:p,onImageUpload:b,onBlur:v,config:{view:{menu:!0,html:!c,md:!0}}})):"",0==t?o.a.createElement("div",{className:ie.a.view},a?o.a.createElement("div",{className:ie.a.toc},o.a.createElement("div",{className:ie.a.title},o.a.createElement(le["a"],{onClick:function(){n(!1)}})),ye&&ye.render()):"",o.a.createElement("div",{className:ie.a.text},o.a.createElement(se["b"],{value:i,renderHTML:function(){return m},config:{view:{menu:!1,md:!1}},readOnly:!0}))):"")};return E()})),je=Object(T["a"])(Object(r["b"])((function(e){var t=e.note,a=e.noteMenu,n=e.loading;return{note:t,noteMenu:a,loading:n}}),null,null,{forwardRef:!0})(Oe)),ge=(a("H1Ta"),J["a"].TabPane),ke={0:o.a.createElement(Q["a"],{twoToneColor:"#52c41a"}),1:o.a.createElement(Y["a"],{twoToneColor:"#f1c40f"}),2:o.a.createElement(U["a"],null)},Me="group",xe=o.a.forwardRef((function(e,t){var a=Object(c["useRef"])(),r=Object(c["useState"])(0),i=Object(n["a"])(r,2),l=i[0],d=i[1],f=Object(c["useState"])(-1),v=Object(n["a"])(f,2),b=v[0],_=v[1],h=Object(c["useState"])(""),E=Object(n["a"])(h,2),y=E[0],N=E[1],O=Object(c["useState"])(!1),j=Object(n["a"])(O,2),k=j[0],M=j[1],x=Object(c["useState"])(!1),w=Object(n["a"])(x,2),C=w[0],S=w[1];Object(c["useEffect"])((function(){_(0),N(e.note.openedNote.name)}),[e.note.openedNote]),Object(c["useImperativeHandle"])(t,(function(){return{handleAddNote:function(t){var a=Object(oe["d"])();d(1);var n={name:"\u65b0\u6587\u6863",parentId:t,id:a};N("\u65b0\u6587\u6863"),e.dispatch({type:"note/refreshShowNote",payload:n})}}}));var I=function(e){d(1)},T=function(e){N(e.target.value),d(1)},L=function(t){var a=e.note.openedNote;a.id!=t&&(e.dispatch({type:"note/openNote",payload:t}),_(0),d(0))},P=function(t){var a=[],n=e.note.openedNote;t?e.dispatch({type:"note/refreshOpenedNote",payload:{}}):n&&n.name&&a.push(e.note.openedNote),e.dispatch({type:"note/refreshOpenedNotes",payload:a})},D=function(t,a){if(0!=l){var n,c=Object(m["a"])({},e.note.openedNote);d(2),c.name=y,"title"==t?n="note/updateNoteTitle":(n="note/updateNoteText",c.text=a),e.dispatch({type:n,payload:Object(m["a"])(Object(m["a"])({},c),{},{id:"new"==c.id?null:c.id})}).then((function(t){t&&e.note.openedNote.id==c.id&&d(0)}))}},R=function(e,t){"title"==t?D(t):e.relatedTarget&&e.relatedTarget.getAttribute("group")==Me||D(t)},B=function(t){e.dispatch({type:"note/closeNote",payload:t}),_(0),d(0)},K=function(){var t=e.note.openedNote;e.dispatch({type:"note/editFav",payload:{noteId:t.id,isFav:!t.fav}})},F=function(){e.dispatch({type:"note/refreshShowMenu",payload:!0})},A=function(){u["a"],Z["a"];var t=[];if(e.note.openedNote.id)return e.note.openedNote.fav?t.push(o.a.createElement(u["a"],{onClick:K,type:"text"},o.a.createElement(X["a"],{className:ce.a.fav}))):t.push(o.a.createElement(u["a"],{onClick:K,type:"text"},o.a.createElement($["a"],null))),b?t.push(o.a.createElement(u["a"],{type:"text",onClick:function(){_(0)}},o.a.createElement(te["a"],null))):t.push(o.a.createElement(u["a"],{onClick:function(){return _(1)},type:"text"},o.a.createElement(ee["a"],null))),t.push(ke[l]),t},q=o.a.createElement(p["a"],{onClick:function(e){return P("1"!==e.key)}},o.a.createElement(p["a"].Item,{key:"1"},"\u5173\u95ed\u5176\u4ed6"),o.a.createElement(p["a"].Item,{key:"2"},"\u5173\u95ed\u6240\u6709")),H=[{icon:"&#xe88c;",name:"three"},{icon:"&#xe8bf;",name:"two"},{icon:"&#xe88e;",name:"one"}],V=o.a.createElement(p["a"],{items:[{key:"1",label:"1st item"},{key:"2",label:"2nd item"},{key:"3",label:"3rd item"}]}),z=function(){var t,n=e.isMobile,c=e.note,r=c.openedNote,i=void 0===r?{}:r,l=c.openedNotes,d=e.menuStyle,m=e.setMenuStyle;e.loading.effects["noteFavorite/editOne"]||e.loading.effects["note/openNote"];return o.a.createElement("div",{className:"".concat(ce.a.main," ").concat(n?ce.a.isMobile:"")},n?o.a.createElement("div",{className:ce.a.toolbar},o.a.createElement(u["a"],{shape:"circle",onClick:F},o.a.createElement("span",{className:"iconfont"},"\ue7c3")),o.a.createElement(s["a"].Button,{overlay:V},"Actions")):o.a.createElement("div",{className:ce.a.tabPane},o.a.createElement("div",{className:ce.a.btn},o.a.createElement("div",{className:ce.a.toggler},H.map((function(e){return o.a.createElement("span",{key:e.name,className:"iconfont ".concat(d==e.name?ce.a.active:""),dangerouslySetInnerHTML:{__html:e.icon},onClick:function(){return m(e.name)}})})))),o.a.createElement("div",{className:ce.a.tab},o.a.createElement(J["a"],{hideAdd:!0,onTabClick:L,activeKey:i.id,type:"editable-card",onEdit:B},l.map((function(e){return o.a.createElement(ge,{tab:e.name,key:e.id})})))),o.a.createElement("div",{className:ce.a.btn},o.a.createElement(s["a"],{overlay:q,onVisibleChange:function(e){M(e)},visible:k},o.a.createElement("div",{className:ce.a.closeBtn},o.a.createElement(ae["a"],null))))),o.a.createElement("div",{className:ce.a.title},n?"":o.a.createElement(u["a"],{type:"text",onClick:function(){return S(!C)},disabled:!!b},o.a.createElement("span",{className:"iconfont"},"\ue7e3")),o.a.createElement(g["a"],{maxLength:100,ref:a,value:y,onBlur:function(e){return R(e,"title")},onInput:T}),o.a.createElement("div",{className:ce.a.buttons},null===(t=A())||void 0===t?void 0:t.map((function(e){return e})))),o.a.createElement("div",{className:ce.a.content},o.a.createElement(je,{handleChange:I,showToc:C,setShowToc:S,displayIndex:b,saveContent:function(e){return D("content",e)}})))};return z()})),we=Object(T["a"])(Object(r["b"])((function(e){var t=e.note,a=e.noteMenu,n=e.loading;return{note:t,noteMenu:a,loading:n}}),null,null,{forwardRef:!0})(xe)),Ce=a("L+oi"),Se=a.n(Ce),Ie=a("lzHC"),Te=a.n(Ie),Le=(a("ozfa"),a("MJZm")),Pe=a("yOLg"),De=a("NT1f"),Re=a("DRyX"),Be=a("sKr2"),Ke=a.n(Be),Fe=v["a"].confirm,Ae=Le["a"].DirectoryTree,qe=function(e,t){var a=Object(c["useState"])([]),r=Object(n["a"])(a,2),i=r[0],l=r[1],s=Object(c["useState"])(!1),u=Object(n["a"])(s,2),d=u[0],m=u[1],p=Object(c["useState"])({}),v=Object(n["a"])(p,2),b=v[0],_=v[1],E=Object(c["useState"])([]),y=Object(n["a"])(E,2),N=y[0],O=y[1],g=Object(c["useState"])([]),M=Object(n["a"])(g,2),w=M[0],C=M[1];Object(c["useEffect"])((function(){Object(j["g"])("0",!0).then((function(e){var t=e.result;return C(t)}))}),[]),Object(c["useEffect"])((function(){Object(j["g"])("0",!0).then((function(e){var t=e.result;return C(t)}))}),[e.note.treeKey]),Object(c["useEffect"])((function(){var t=e.note.openedNote;if(t.parentIds){var a=(t.parentIds||"").split("/");l([t.id].concat(Object(k["a"])(a)))}O([t.id])}),[e.note.openedNote]);var S=function(e){l(e)},I=function(t,a){var n=a.node,c=n.key,o=n.title,r=n.isLeaf,i=n.parentIds,l=n.parentId;r?e.onNoteClick({id:c,name:o,parentIds:i,isLeaf:r,parentId:l}):O([c])},T=function(t){Fe({title:"\u786e\u5b9a\u8981\u5220\u9664 ".concat(t.title,"?"),icon:o.a.createElement(h["a"],null),onOk:function(){e.dispatch({type:"note/deleteNote",payload:{id:t.key,isLeaf:t.isLeaf,parentIds:t.parentIds,parentId:t.parentId}}).then((function(){f["default"]["info"]({message:"\u5220\u9664\u6210\u529f"})}))}})},L=function(e){m(!0),_(e)},P=function(t){var a=t.node,n=t.dragNode,c=a.key;n&&n.parentId!=c&&n.key!=c&&e.dispatch({type:"note/updateParent",payload:{id:n.key,parentId:c}})},D=function(){e.loading.effects["note/queryMenuTree"];return o.a.createElement("div",{className:Ke.a.content},o.a.createElement(R,{visible:d,node:b,onCancel:function(){return m(!1)}}),o.a.createElement("div",{className:Ke.a.tree},o.a.createElement(Ae,{selectedKeys:N,blockNode:!0,multiple:!0,showIcon:!1,expandedKeys:i,treeData:w,onExpand:S,titleRender:function(e){var t,a={color:"rgba(0, 0, 0, 0.5)"};return t=e.isLeaf?o.a.createElement(B["a"],null):i.includes(e.key)?0==e.parentId?o.a.createElement(Pe["a"],{style:a}):o.a.createElement(De["a"],null):0==e.parentId?o.a.createElement(Re["a"],{style:a}):o.a.createElement(x["a"],null),o.a.createElement("div",{className:Ke.a.treeNode},o.a.createElement("div",{className:Ke.a.title},t,e.title),o.a.createElement("div",{className:"noteTreeMenu",onClick:function(t){t.preventDefault(),t.stopPropagation(),L(e)}},o.a.createElement(ee["a"],null)),o.a.createElement("div",{className:"noteTreeMenu delete",onClick:function(t){t.preventDefault(),t.stopPropagation(),T(e)}},o.a.createElement(K["a"],null)))},autoExpandParent:!0,draggable:!0,onSelect:I,onDrop:P})))};return D()},He=Object(r["b"])((function(e){var t=e.note,a=e.noteMenu,n=e.loading;return{note:t,noteMenu:a,loading:n}}))(qe),Ve=(a("nRaC"),a("5RzL")),ze=a("l+S1"),Ge=a("hPJ6"),We=a.n(Ge),Je=function(e,t){var a=Object(c["useState"])(""),r=Object(n["a"])(a,2),i=r[0],l=r[1],s=Object(c["useState"])(""),u=Object(n["a"])(s,2),d=u[0],m=u[1],f=Object(c["useState"])([]),p=Object(n["a"])(f,2),v=p[0],b=p[1],_=Object(c["useState"])({}),h=Object(n["a"])(_,2),E=h[0],y=h[1];Object(c["useEffect"])((function(){Object(j["g"])("0",!1).then((function(e){var t=e.result;return b(t)}))}),[]);var N=function(){var e={searchStr:i,withLeaf:!1};y(e)},O=function(){return o.a.createElement("div",{className:We.a.container,style:e.style},o.a.createElement("div",{className:We.a.searchBar},o.a.createElement(g["a"],{className:We.a.search,value:i,onChange:function(e){return l(e.currentTarget.value)},onPressEnter:N,suffix:o.a.createElement(ze["a"],null)}),o.a.createElement("div",null,o.a.createElement("label",{className:We.a.treeLabel},"\u4f4d\u7f6e :"),o.a.createElement(Ve["a"],{style:{width:"100%"},value:d,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:v,placeholder:"Please select",treeDefaultExpandAll:!0,onChange:function(e){return m(e)}}))),o.a.createElement("div",{className:We.a.list},o.a.createElement(z,{getDataMethod:j["c"],params:E})))};return O()},Qe=Object(r["b"])((function(e){var t=e.note,a=e.noteMenu,n=e.loading;return{note:t,noteMenu:a,loading:n}}))(Je),Ye=a("uqxR"),Ue=a.n(Ye),Ze=function(e,t){var a=Object(c["useState"])([]),r=Object(n["a"])(a,2),i=r[0],l=r[1];Object(c["useEffect"])((function(){Object(j["d"])().then((function(e){var t=e.result;return l(t)}))}),[e.note.favKey]);var s=function(){return o.a.createElement("div",{className:Ue.a.container},o.a.createElement(z,{data:i,noDelete:!0}))};return s()},Xe=Object(r["b"])((function(e){var t=e.note;return{note:t}}))(Ze),$e=function(e,t){var a=Object(c["useState"])("tree"),r=Object(n["a"])(a,2),i=r[0],l=r[1],s=function(){e.setMenuStyle("two")},u=function(t){"three"!=e.menuStyle&&e.setMenuStyle("three"),l(t)},d=function(t){var a=e.isMobile;if(t.isLeaf){var n=e.note.openedNote;n.id!=t.id&&e.dispatch({type:"note/openNote",payload:t.id}),a&&s()}else{var c=e.noteMenu.listParentNote;c.id!=t.id&&e.dispatch({type:"noteMenu/refreshListParentNote",payload:t})}},m={tree:{menuType:"tree",icon:"&#xe82d;",text:"\u6587\u4ef6\u5939"},list:{menuType:"list",icon:"&#xe8a8;",text:"\u5217\u8868"},search:{menuType:"search",icon:"&#xe893;",text:"\u641c\u7d22"},fav:{menuType:"fav",icon:"&#xe8b1;",text:"\u6536\u85cf\u5939"}},f=function(){return o.a.createElement("div",{className:"".concat(Te.a.container," ").concat(Te.a[e.menuStyle])},o.a.createElement("div",{className:Te.a.menu},o.a.createElement("span",{className:Te.a.avatar},o.a.createElement("img",{src:Se.a})),o.a.createElement("ul",null,Object.keys(m).map((function(e){return o.a.createElement("li",{key:e,onClick:function(){return u(e)},className:m[e].menuType==i?Te.a.active:""},o.a.createElement("span",{className:"iconfont",dangerouslySetInnerHTML:{__html:m[e].icon}}))})))),o.a.createElement("div",{className:Te.a.content},o.a.createElement("header",{className:Te.a.header},o.a.createElement("em",{className:Te.a.closeBtn},o.a.createElement("span",{className:"iconfont",onClick:s},"\ue86a")),m[i]?m[i].text:""),o.a.createElement("article",{className:Te.a.body},o.a.createElement("div",{className:"tree"==i?Te.a.show:Te.a.hide},o.a.createElement(He,{onNoteClick:d,getDragNote:function(){return dragNote}})),o.a.createElement("div",{className:"list"==i?Te.a.show:Te.a.hide},o.a.createElement(W,{onNoteClick:d,setDragNote:function(){}})),o.a.createElement("div",{className:"search"==i?Te.a.show:Te.a.hide},o.a.createElement(Qe,{onNoteClick:d})),o.a.createElement("div",{className:"fav"==i?Te.a.show:Te.a.hide},o.a.createElement(Xe,{onNoteClick:d})))))};return f()},et=Object(r["b"])((function(e){var t=e.note,a=e.noteMenu,n=e.loading;return{note:t,noteMenu:a,loading:n}}))($e),tt=function(e){var t=Object(c["useState"])("three"),a=Object(n["a"])(t,2),r=a[0],i=a[1],s=function(t){var a=e.isMobile;if(t.isLeaf){var n=e.note.openedNote;n.id!=t.id&&e.dispatch({type:"note/openNote",payload:t.id}),a&&e.dispatch({type:"note/refreshShowMenu",payload:!1})}else{var c=e.noteMenu.listParentNote;c.id!=t.id&&e.dispatch({type:"noteMenu/refreshListParentNote",payload:t})}},u=function(){var t=e.isMobile;e.loading.effects["note/queryNote"]||e.loading.effects["note/deleteNote"]||e.loading.effects["note/updateNoteTitle"]||e.loading.effects["note/queryTabTree"]||e.loading.effects["note/queryChildren"];return o.a.createElement("div",{className:"".concat(l.a.main," ").concat(t?l.a.isMobile:"")},t?e.note.showMenu?o.a.createElement(W,{onNoteClick:s,setDragNote:function(e){return e}}):o.a.createElement(we,{setMenuStyle:i,menuStyle:r}):o.a.createElement("div",{className:l.a.container},o.a.createElement(et,{setMenuStyle:i,menuStyle:r}),o.a.createElement("div",{className:l.a.content},o.a.createElement(we,{setMenuStyle:i,menuStyle:r}))))};return u()};t["default"]=Object(T["a"])(Object(r["b"])((function(e){var t=e.note,a=e.noteMenu,n=e.loading;return{note:t,noteMenu:a,loading:n}}))(tt))},QfEt:function(e,t,a){"use strict";var n=a("0Owb"),c=a("q1tI"),o=a.n(c),r=a("lU33"),i=function(e){return function(t){return o.a.createElement(r["a"],{query:"(max-width:900px)"},(function(a){return o.a.createElement("div",{className:"is-mobile"},o.a.createElement(e,Object(n["a"])({},t,{isMobile:a})))}))}};t["a"]=i},ddak:function(e,t,a){e.exports={view:"view___CFH8I",toc:"toc___1DkbD",title:"title___3kzp9",text:"text___9cYVR"}},hPJ6:function(e,t,a){e.exports={container:"container___3qFCj",searchBar:"searchBar___h7W8C",search:"search___30H_5",treeLabel:"treeLabel___1IGyY",list:"list___22CGC"}},lzHC:function(e,t,a){e.exports={main:"main___3GVUh",container:"container___Ku18n",content:"content___2uth4",isMobile:"isMobile___1E54u",three:"three___2af9R",two:"two___1psg2",one:"one___5FtEX",menu:"menu___2vaSs",avatar:"avatar___3pPfy",active:"active___1uxcK",header:"header___3KYU-",closeBtn:"closeBtn___3eWHa",body:"body___1a_BY",show:"show___30Fr5",hide:"hide___2vNBK"}},mcit:function(e,t,a){e.exports={toolbar:"toolbar___2gR-C"}},sKr2:function(e,t,a){e.exports={content:"content___35fWD",tree:"tree___22diT",treeNode:"treeNode___18zdE",treeMenu:"treeMenu___7iaeS",title:"title___3-coS"}},uqxR:function(e,t,a){e.exports={main:"main___33xfB",container:"container___3aQ7f",content:"content___KAs_i",isMobile:"isMobile___30Y5W"}}}]);