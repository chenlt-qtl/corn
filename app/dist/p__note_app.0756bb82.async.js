(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{Gztv:function(e,t,n){e.exports={toolbar:"toolbar___3M9Xg",buttons:"buttons___1MeMU",status:"status___HHsQA",yellow:"yellow___1X8oL",warning:"warning___36A0x",green:"green___vRCy7",main:"main___3vV_G",content:"content___vaGnd",title:"title___2ugCE",text:"text___11eiN"}},TcXl:function(e,t,n){e.exports={color0:"color0___yRifW",color1:"color1___5opj9",color2:"color2___3_IIO",color3:"color3___DwDA2",color4:"color4___3vbyK",color5:"color5___KruFH",color6:"color6___FqTTS",main:"main___2Q90t",icon:"icon___27iSw",label:"label___Zo2PJ",item:"item___2lvkE",shortLogo:"shortLogo___3YGJ7",active:"active___1FXFo",modal:"modal___3Kerv",title:"title___2dRPT",buttons:"buttons___2vAD4"}},xDFs:function(e,t,n){e.exports={content:"content___5m2gZ",menu:"menu___3fSYr",menuContent:"menuContent___2SP-5",title:"title___1hXQc",button:"button___osRoe",fold:"fold___3F1HC",item:"item___1DisU",hidden:"hidden___lBY_E",show:"show___1eHZk",menuItem:"menuItem___3hdZz",label:"label___1F3IV",noteTitle:"noteTitle___1d8d-",addChild:"addChild___xeA-e",active:"active___nd--y",parents:"parents___3d1eC",addBtn:"addBtn___yt2Pd",favorate:"favorate___3D19U"}},xw1K:function(e,t,n){"use strict";n.r(t);n("T2oS");var a=n("W9HT"),o=n("q1tI"),l=n.n(o),r=n("9kvl"),c=(n("/zsF"),n("PArb")),i=(n("+L6B"),n("2/Rp")),u=(n("qVdP"),n("jsC+")),s=(n("/xke"),n("TeRw")),m=n("VTBJ"),d=n("KQm4"),f=(n("lUTK"),n("BvKs")),p=n("ODXe"),v=(n("2qtc"),n("kLXV")),b=n("73BT"),E=n("djQt"),_=n("RCxd"),h=n("UESt"),g=n("8Skl"),y=n("xvlK"),C=n("5bA4"),M=n("xDFs"),k=n.n(M),O=(n("Mwp2"),n("VXEj")),j=(n("miYZ"),n("tsqr")),N=n("eFNv"),w=n("w5pM"),I=n("4i/N"),T=n("TcXl"),x=n.n(T),S=n("wx14"),F=(n("5NDa"),n("5rEg")),A=n("o0o1"),R=n.n(A),H=n("HaE+"),q=(n("y8nQ"),n("Vl3Y")),B=n("bPPy"),L={labelCol:{span:6},wrapperCol:{span:12}},V=function(e){var t=e.modalVisible,n=e.onCancel,a=e.note,r=q["a"].useForm(),c=Object(p["a"])(r,1),i=c[0];return Object(o["useEffect"])((function(){i.setFieldsValue(a)}),[a]),l.a.createElement(v["a"],{title:"\u8be6\u7ec6\u4fe1\u606f",visible:t,onCancel:function(){return n(!1)},style:{top:20},onOk:Object(H["a"])(R.a.mark((function e(){var t,o,l,r,c;return R.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.validateFields();case 2:return t=e.sent,o=Object(m["a"])(Object(m["a"])({},a),t),e.next=6,Object(B["j"])(o);case 6:l=e.sent,r=l.success,c=l.message,r?(j["b"].success("\u64cd\u4f5c\u6210\u529f!"),n(!0)):j["b"].error(c);case 10:case"end":return e.stop()}}),e)})))},l.a.createElement(q["a"],Object(S["a"])({},L,{form:i}),l.a.createElement(q["a"].Item,{label:"\u6807\u9898",name:"name",rules:[{required:!0,message:"Please input your title!"}]},l.a.createElement(F["a"],null))))},D=V,P=n("c+yx"),K=function(e){var t=Object(o["useState"])([]),n=Object(p["a"])(t,2),a=n[0],r=n[1],c=Object(o["useState"])(!1),u=Object(p["a"])(c,2),s=u[0],m=u[1],f=Object(o["useState"])(!1),b=Object(p["a"])(f,2),E=b[0],_=b[1],h=Object(o["useState"])({}),g=Object(p["a"])(h,2),y=g[0],C=g[1];Object(o["useEffect"])((function(){M()}),[]);var M=function(){e.dispatch({type:"note/queryChildren",payload:"0"}).then((function(e){if(e){var t=e.result;t.length>0&&T(t[0].id,t[0].name),r(Object(d["a"])(t))}}))},k=function(){a.length>=10?j["b"].error("\u6700\u591a\u53ea\u80fd\u670910\u4e2a\u7b14\u8bb0\u672c"):(_(!0),C({name:"",id:Object(P["c"])()}))},T=function(t,n){e.dispatch({type:"noteMenu/updateActiveTop",payload:{id:t,name:n}})},S=function(){m(!1)},F=function(){m(!0)},A=function(e){_(!0),C(e)},R=function(e){},H=function(e){e&&M(),_(!1)},q=function(){return l.a.createElement("div",{className:x.a.main},l.a.createElement("ul",null,a.map((function(t){var n=t.id===e.noteMenu.activeTopId;return l.a.createElement("li",{key:t.id,onClick:function(){return T(t.id,t.name)},className:"".concat(x.a.item," ").concat(n?x.a.active:"")},l.a.createElement("div",{className:x.a.shortLogo},t.name.substr(0,1)),l.a.createElement("div",{className:x.a.label},t.name))}))),l.a.createElement("div",{className:x.a.icon},l.a.createElement(N["a"],{onClick:F})),l.a.createElement(v["a"],{visible:s,closable:!1,footer:null,style:{top:20}},l.a.createElement("div",{className:x.a.modal},l.a.createElement("div",{className:x.a.title},l.a.createElement("span",null,"\u7ba1\u7406\u7b14\u8bb0\u672c"),l.a.createElement("div",{className:x.a.buttons},l.a.createElement(i["a"],{type:"text",onClick:k},l.a.createElement(w["a"],null)),l.a.createElement(i["a"],{type:"text",onClick:S},l.a.createElement(I["a"],null)))),l.a.createElement(O["b"],{dataSource:a,renderItem:function(e){return l.a.createElement(O["b"].Item,{actions:[l.a.createElement("a",{onClick:function(){A(e)}},"edit"),l.a.createElement("a",{onClick:function(){R(e.id)}},"delete")]},e.name)}}))),l.a.createElement(D,{onCancel:H,note:y,modalVisible:E}))};return q()},U=Object(r["b"])((function(e){var t=e.note,n=e.noteMenu,a=e.loading;return{note:t,noteMenu:n,loading:a}}))(K),X=v["a"].confirm,z=[{id:"open",name:"\u6700\u8fd1\u6253\u5f00",icon:l.a.createElement(b["a"],null)},{id:"favorate",name:"\u6536\u85cf\u5939",icon:l.a.createElement(E["a"],{className:k.a.favorate})}],Q={fontSize:"10px"},Y=function(e,t){var n=Object(o["useState"])(!1),a=Object(p["a"])(n,2),r=a[0],v=a[1],b=Object(o["useState"])(""),E=Object(p["a"])(b,2),M=E[0],O=E[1],j=Object(o["useState"])([]),N=Object(p["a"])(j,2),w=N[0],I=N[1];Object(o["useEffect"])((function(){e.refreshMenu(2)}),[e.noteMenu.activeMenu1Id]),Object(o["useEffect"])((function(){e.refreshMenu(3)}),[e.noteMenu.activeMenu2Id]);var T=function(e){return"favorate"==e.id||"open"==e.id?l.a.createElement(l.a.Fragment,null):l.a.createElement(f["a"],{onClick:function(t){return R(t,e)}},l.a.createElement(f["a"].Item,{key:"add"},"\u589e\u52a0\u5b50\u7b14\u8bb0"),l.a.createElement(f["a"].Item,{key:"del"},"\u5220\u9664"))},x=function(e,t){I(e?w.filter((function(e){return e!=t})):[t].concat(Object(d["a"])(w)))},S=function(t){var n=A(t),a=n.id,o=n.title,l=n.level;"open"!=a&&"favorate"!=a&&e.dispatch({type:"note/queryNote",payload:a}),1==l?(e.dispatch({type:"noteMenu/refreshActiveMenu1Id",payload:{id:a,title:o}}),O("")):2==l?(e.dispatch({type:"noteMenu/refreshActiveMenu2Id",payload:{id:a,title:o}}),O("")):O(a)},F=function(t){t==e.noteMenu.activeMenu1Id?e.dispatch({type:"noteMenu/refreshMenu3",payload:[]}):t==e.noteMenu.activeTopId&&(e.dispatch({type:"noteMenu/refreshMenu2",payload:[]}),e.dispatch({type:"noteMenu/refreshMenu3",payload:[]})),e.onAddNote(t)},A=function(e){var t,n=e.key||e.id,a=e.title||e.name;return t="favorate"==n||"open"==n?1:Object(P["a"])(e.parentIds),Object(m["a"])(Object(m["a"])({},e),{},{id:n,title:a,level:t})},R=function(t,n){var a=t.key,o=A(n),r=o.id,c=o.title,i=o.level;"add"==a||"del"==a&&X({title:"\u786e\u5b9a\u8981\u5220\u9664 ".concat(c,"?"),icon:l.a.createElement(_["a"],null),onOk:function(){e.dispatch({type:"note/deleteNote",payload:r}).then((function(){s["a"]["info"]({message:"\u5220\u9664\u6210\u529f"}),e.refreshMenu(i)}))}})},H=function(e){var t=e.level,n=e.id;if(t>=3){if(!e.leaf)return w.includes(n)?l.a.createElement(h["a"],{style:Q,onClick:function(){return x(!0,n)}}):l.a.createElement(g["a"],{style:Q,onClick:function(){return x(!1,n)}})}else if(e.icon)return e.icon},q=function e(t,n){if(t)return l.a.createElement("ul",null,t.map((function(t){var a=A(t),o=a.id,r=a.title,c=a.level,i=void 0===c?0:c,s=(i||0)>=3;return l.a.createElement("li",{key:o},l.a.createElement(u["a"],{overlay:T(t),trigger:["contextMenu"]},l.a.createElement("div",{className:"".concat(k.a.menu1Item," ").concat(n==o?k.a.active:"")},l.a.createElement("div",{className:k.a.label,onClick:function(){return S(t)},style:{paddingLeft:"".concat(s?8*(i-3)+12:12,"px")}},H(a),l.a.createElement("div",{className:k.a.noteTitle},"\xa0\xa0",r),i<=3&&"open"!=o&&"favorate"!=o?l.a.createElement("span",{className:k.a.addChild,onClick:function(e){e.stopPropagation(),e.preventDefault(),F(o)}},l.a.createElement(y["a"],{title:"\u589e\u52a0\u5b50\u7b14\u8bb0"})):""))),!t.children||w.includes(o)?"":e(t.children,n))})))},B=function(){var t=e.noteMenu,n=t.menu1Item,a=t.menu2Item,o=t.menu3Item;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"".concat(k.a.content," ").concat(r?k.a.hidden:k.a.show)},l.a.createElement("div",{className:k.a.fold},l.a.createElement(i["a"],{type:"primary",size:"small",onClick:function(){return v(!r)},shape:"circle",icon:r?l.a.createElement(h["a"],null):l.a.createElement(C["a"],null)})),l.a.createElement("div",{className:k.a.menu},l.a.createElement(U,null),l.a.createElement("div",{className:k.a.menuContent},l.a.createElement("div",{className:k.a.title},e.noteMenu.title1),l.a.createElement("ul",null,q(z,e.noteMenu.activeMenu1Id),l.a.createElement(c["a"],null),q(n,e.noteMenu.activeMenu1Id)),l.a.createElement("div",{className:k.a.button},l.a.createElement(i["a"],{block:!0,onClick:function(){return F(e.noteMenu.activeTopId)}},"\u589e\u52a0"))),a.length>0?l.a.createElement("div",{className:k.a.menuContent},l.a.createElement("div",{className:k.a.title},e.noteMenu.title2),q(a,e.noteMenu.activeMenu2Id),l.a.createElement("div",{className:k.a.button},l.a.createElement(i["a"],{block:!0,onClick:function(){return F(e.noteMenu.activeMenu1Id)}},"\u589e\u52a0"))):"",o.length>0?l.a.createElement("div",{className:k.a.menuContent},l.a.createElement("div",{className:k.a.title},e.noteMenu.title3),q(o,M),l.a.createElement("div",{className:k.a.button},l.a.createElement(i["a"],{block:!0,onClick:function(){return F(e.noteMenu.activeMenu2Id)}},"\u589e\u52a0"))):"")))};return B()},G=Object(r["b"])((function(e){var t=e.note,n=e.noteMenu,a=e.loading;return{note:t,noteMenu:n,loading:a}}))(Y),J=n("uMRc"),Z=n("u2V1"),W=n("ye1Q"),$=n("Gztv"),ee=n.n($),te=n("1M3H"),ne=n.n(te),ae=n("56rK"),oe=n.n(ae),le=(n("i8oR"),new ne.a);oe.a.use(ae["Plugins"].TabInsert,{tabMapValue:1});var re=["header","font-bold","font-italic","font-underline","font-strikethrough","list-unordered","list-ordered","block-quote","block-wrap","block-code-inline","block-code-block","table","image","link","clear","logger","auto-resize","full-screen"],ce=l.a.forwardRef((function(e,t){var n=Object(o["useState"])(""),a=Object(p["a"])(n,2),r=a[0],c=a[1];Object(o["useEffect"])((function(){var t=e.note.showNote.text;c(t?e.note.showNote.text:"")}),[e.note.showNote]);var i=function(t){var n=t.html,a=t.text;console.log("handleEditorChange",n,a),c(a),e.handleChange()},u=function(){console.log("save note",r),e.saveContent(r)},s=function(e,t){var n=new FileReader;n.onload=Object(H["a"])(R.a.mark((function e(){var a,o,l;return R.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=function(e){var t=e.split(","),n=t[0].match(/:(.*?);/)[1],a=atob(t[1]),o=a.length,l=new Uint8Array(o);while(o--)l[o]=a.charCodeAt(o);return new Blob([l],{type:n})},o=a(n.result),console.log(o),e.next=5,Object(B["k"])(n.result);case 5:l=e.sent,l.success?t(l.result):console.log(l.message);case 7:case"end":return e.stop()}}),e)}))),n.readAsDataURL(e)},m=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(oe.a,{value:r,style:{height:"300px"},renderHTML:function(e){return le.render(e)},onChange:i,plugins:re,config:{view:{html:!1}},onImageUpload:s,onBlur:u}),l.a.createElement(oe.a,{value:r,style:{border:0},renderHTML:function(e){return le.render(e)},config:{view:{menu:!1,md:!1}},readOnly:!0}))};return m()})),ie=Object(r["b"])((function(e){var t=e.note,n=e.noteMenu,a=e.loading;return{note:t,noteMenu:n,loading:a}}),null,null,{forwardRef:!0})(ce),ue=F["a"].TextArea,se={0:l.a.createElement(J["a"],{twoToneColor:"#52c41a"}),1:l.a.createElement(Z["a"],{twoToneColor:"#f1c40f"}),2:l.a.createElement(W["a"],null)},me="group",de=l.a.forwardRef((function(e,t){Object(o["useRef"])();var n=Object(o["useRef"])(),a=Object(o["useState"])(""),r=Object(p["a"])(a,2),c=r[0],i=r[1],u=Object(o["useState"])(null),s=Object(p["a"])(u,2),d=s[0],f=s[1],b=Object(o["useState"])(""),E=Object(p["a"])(b,2),_=E[0],h=E[1],g=Object(o["useState"])(!1),y=Object(p["a"])(g,2),C=y[0],M=y[1],k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";document.execCommand(e,!1,t)},O=function(){M(!0)};Object(o["useImperativeHandle"])(t,(function(){return{handleAddNote:function(t){console.log("handleAddNote");var n=Object(P["c"])();f(1);var a={name:"\u65b0\u6587\u6863",parentId:t,id:n};h("\u65b0\u6587\u6863"),e.dispatch({type:"note/refreshShowNote",payload:a})}}}));var j=function(){M(!1)},N=function(e){var t=e.target.value;i(t)},w=function(e){f(1)},I=function(e){h(e.target.value),f(1)};Object(o["useEffect"])((function(){T(e.note.showNote)}),[e.note.showNote]);var T=function(e){console.log("handleShowNote"),h(e.name),f(0)},x=function(t,n){if(0!=d){var a,o=Object(m["a"])({},e.note.showNote);if(o.id)f(2),o.name=_,"title"==t?a="note/updateNoteTitle":(a="note/updateNoteText",o.text=n),e.dispatch({type:a,payload:o}).then((function(n){if(n){if(o.createTime)"title"==t&&e.refreshMenu(Object(P["a"])(o.parentIds));else{var a=n.result;o=a,e.refreshMenu(Object(P["a"])(a.parentIds))}e.dispatch({type:"openNotes/updateOpenNote",payload:o}),e.note.activeNoteId==o.id&&f(0)}}))}},S=function(e,t){"title"==t?x(t):e.relatedTarget&&e.relatedTarget.getAttribute("group")==me||x(t)},A=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:ee.a.toolbar,onBlur:function(e){return S(e,"content")}},l.a.createElement("div",{className:ee.a.buttons},l.a.createElement("a",{group:me,onClick:O,href:"#"},"code"),l.a.createElement("a",{group:me,onClick:function(){return k("bold")},href:"#"},l.a.createElement("b",null,"Bold")),l.a.createElement("a",{group:me,onClick:function(){return k("italic")},href:"#"},l.a.createElement("em",null,"Italic")),l.a.createElement("a",{group:me,onClick:function(){return k("underline")},href:"#"},l.a.createElement("u",null,l.a.createElement("b",null,"U"))),l.a.createElement("a",{group:me,className:ee.a.yellow,onClick:function(){k("backColor","#FFEB9C"),k("foreColor","#9C6500")},href:"#"},"\u7a81\u51fa"),l.a.createElement("a",{group:me,className:ee.a.green,onClick:function(){k("backColor","#C6EFCE"),k("foreColor","#006100")},href:"#"},"\u4f18\u79c0"),l.a.createElement("a",{group:me,className:ee.a.warning,onClick:function(){k("backColor","#FFC7CE"),k("foreColor","#9C0006")},href:"#"},"\u8b66\u544a"),l.a.createElement("a",{group:me,onClick:function(){return k("removeFormat")},href:"#"},l.a.createElement("b",null,"\u53bb\u9664\u683c\u5f0f")),l.a.createElement("a",{group:me,onClick:function(){return k("insertHorizontalRule")},href:"#"},l.a.createElement("b",null,"\u6c34\u5e73\u7ebf")),l.a.createElement("a",{group:me,onClick:function(){return k("insertHTML","&nbsp;&nbsp;&nbsp;-&nbsp;")},href:"#"},l.a.createElement("b",null,"*")),l.a.createElement("a",{group:me,onClick:function(){return k("indent")},href:"#"},l.a.createElement("b",null,"Tab")),l.a.createElement("a",{group:me,onClick:function(){return k("fontname","Microsoft YaHei")},href:"#"},l.a.createElement("span",{style:{fontFamily:"Microsoft YaHei"}},"\u96c5\u9ed1")),l.a.createElement("a",{group:me,onClick:function(){return k("fontname","SimHei")},href:"#"},l.a.createElement("span",{style:{fontFamily:"SimHei"}},"\u9ed1\u4f53")),l.a.createElement("a",{group:me,onClick:function(){return k("fontname","SimSun")},href:"#"},l.a.createElement("span",{style:{fontFamily:"SimSun"}},"\u5b8b\u4f53")),l.a.createElement("a",{group:me,onClick:function(){return k("fontname","Courier New")},href:"#"},l.a.createElement("div",{style:{display:"inline-block",fontFamily:"Courier New"}},"Font")),l.a.createElement("a",{group:me,onClick:function(){return k("fontname","Comic Sans MS")},href:"#"},l.a.createElement("div",{style:{display:"inline-block",fontFamily:"Comic Sans MS"}},"Font"))),l.a.createElement("div",{className:ee.a.status},se[d])),l.a.createElement("div",{className:ee.a.main},e.children,l.a.createElement("div",{className:ee.a.content},l.a.createElement("div",{className:ee.a.title},l.a.createElement(F["a"],{maxLength:100,ref:n,value:_,onBlur:function(e){return S(e,"title")},onInput:I})),l.a.createElement(ie,{handleChange:w,saveContent:function(e){return x("content",e)}}))),l.a.createElement(v["a"],{visible:C,onOk:j,onCancel:function(){return M(!1)}},l.a.createElement("div",{style:{marginBottom:"10px"}},"Source code"),l.a.createElement(ue,{value:c,rows:10,onChange:N})))};return A()})),fe=Object(r["b"])((function(e){var t=e.note,n=e.noteMenu,a=e.loading;return{note:t,noteMenu:n,loading:a}}),null,null,{forwardRef:!0})(de),pe=function(e){var t=Object(o["useRef"])(),n=function(t){var n,a="note/queryChildren";1==t?n=e.noteMenu.activeTopId:2==t?n=e.noteMenu.activeMenu1Id:(t=3,a="note/queryTabTree",n=e.noteMenu.activeMenu2Id),n?e.dispatch({type:a,payload:n}).then((function(n){if(n){var a=n.result;e.dispatch({type:"noteMenu/refreshMenu".concat(t),payload:a})}})):e.dispatch({type:"noteMenu/refreshMenu".concat(t),payload:[]})},r=function(e){t.current.handleAddNote(e)},c=function(){var o=e.loading.effects["note/queryNote"]||e.loading.effects["note/deleteNote"]||e.loading.effects["note/queryTabTree"]||e.loading.effects["note/queryChildren"]||!1;return l.a.createElement(a["a"],{spinning:o},l.a.createElement(fe,{ref:t,refreshMenu:n},l.a.createElement(G,{refreshMenu:n,onAddNote:r})))};return c()};t["default"]=Object(r["b"])((function(e){var t=e.note,n=e.noteMenu,a=e.loading;return{note:t,noteMenu:n,loading:a}}))(pe)}}]);