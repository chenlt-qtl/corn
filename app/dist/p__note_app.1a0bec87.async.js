(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{Gztv:function(e,t,n){e.exports={toolbar:"toolbar___3M9Xg",buttons:"buttons___1MeMU",status:"status___HHsQA",yellow:"yellow___1X8oL",warning:"warning___36A0x",green:"green___vRCy7",main:"main___3vV_G",content:"content___vaGnd",title:"title___2ugCE",text:"text___11eiN"}},TcXl:function(e,t,n){e.exports={color0:"color0___yRifW",color1:"color1___5opj9",color2:"color2___3_IIO",color3:"color3___DwDA2",color4:"color4___3vbyK",color5:"color5___KruFH",color6:"color6___FqTTS",main:"main___2Q90t",icon:"icon___27iSw",label:"label___Zo2PJ",item:"item___2lvkE",shortLogo:"shortLogo___3YGJ7",active:"active___1FXFo",modal:"modal___3Kerv",title:"title___2dRPT",buttons:"buttons___2vAD4"}},xDFs:function(e,t,n){e.exports={content:"content___5m2gZ",menu:"menu___3fSYr",menuContent:"menuContent___2SP-5",title:"title___1hXQc",button:"button___osRoe",fold:"fold___3F1HC",item:"item___1DisU",hidden:"hidden___lBY_E",show:"show___1eHZk",menuItem:"menuItem___3hdZz",label:"label___1F3IV",noteTitle:"noteTitle___1d8d-",addChild:"addChild___xeA-e",active:"active___nd--y",parents:"parents___3d1eC",addBtn:"addBtn___yt2Pd",favorate:"favorate___3D19U"}},xw1K:function(e,t,n){"use strict";n.r(t);n("T2oS");var a=n("W9HT"),o=n("q1tI"),r=n.n(o),l=n("9kvl"),c=(n("/zsF"),n("PArb")),i=(n("+L6B"),n("2/Rp")),u=(n("qVdP"),n("jsC+")),s=(n("/xke"),n("TeRw")),m=n("k1fw"),d=n("oBTY"),f=(n("lUTK"),n("BvKs")),p=n("tJVT"),v=(n("2qtc"),n("kLXV")),b=n("73BT"),E=n("djQt"),_=n("RCxd"),h=n("UESt"),g=n("8Skl"),y=n("xvlK"),C=n("5bA4"),M=n("xDFs"),k=n.n(M),N=(n("Mwp2"),n("VXEj")),O=(n("miYZ"),n("tsqr")),j=n("eFNv"),w=n("w5pM"),I=n("4i/N"),T=n("TcXl"),x=n.n(T),S=n("0Owb"),F=(n("5NDa"),n("5rEg")),A=n("WmNS"),R=n.n(A),H=n("9og8"),q=(n("y8nQ"),n("Vl3Y")),B=n("bPPy"),L={labelCol:{span:6},wrapperCol:{span:12}},V=function(e){var t=e.modalVisible,n=e.onCancel,a=e.note,l=q["a"].useForm(),c=Object(p["a"])(l,1),i=c[0];return Object(o["useEffect"])((function(){i.setFieldsValue(a)}),[a]),r.a.createElement(v["a"],{title:"\u8be6\u7ec6\u4fe1\u606f",visible:t,onCancel:function(){return n(!1)},style:{top:20},onOk:Object(H["a"])(R.a.mark((function e(){var t,o,r,l,c;return R.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.validateFields();case 2:return t=e.sent,o=Object(m["a"])(Object(m["a"])({},a),t),e.next=6,Object(B["j"])(o);case 6:r=e.sent,l=r.success,c=r.message,l?(O["b"].success("\u64cd\u4f5c\u6210\u529f!"),n(!0)):O["b"].error(c);case 10:case"end":return e.stop()}}),e)})))},r.a.createElement(q["a"],Object(S["a"])({},L,{form:i}),r.a.createElement(q["a"].Item,{label:"\u6807\u9898",name:"name",rules:[{required:!0,message:"Please input your title!"}]},r.a.createElement(F["a"],null))))},P=V,D=n("c+yx"),U=function(e){var t=Object(o["useState"])([]),n=Object(p["a"])(t,2),a=n[0],l=n[1],c=Object(o["useState"])(!1),u=Object(p["a"])(c,2),s=u[0],m=u[1],f=Object(o["useState"])(!1),b=Object(p["a"])(f,2),E=b[0],_=b[1],h=Object(o["useState"])({}),g=Object(p["a"])(h,2),y=g[0],C=g[1];Object(o["useEffect"])((function(){M()}),[]);var M=function(){e.dispatch({type:"note/queryChildren",payload:"0"}).then((function(e){if(e){var t=e.result;t.length>0&&T(t[0].id,t[0].name),l(Object(d["a"])(t))}}))},k=function(){a.length>=10?O["b"].error("\u6700\u591a\u53ea\u80fd\u670910\u4e2a\u7b14\u8bb0\u672c"):(_(!0),C({name:"",id:Object(D["c"])()}))},T=function(t,n){e.dispatch({type:"noteMenu/updateActiveTop",payload:{id:t,name:n}})},S=function(){m(!1)},F=function(){m(!0)},A=function(e){_(!0),C(e)},R=function(e){},H=function(e){e&&M(),_(!1)},q=function(){return r.a.createElement("div",{className:x.a.main},r.a.createElement("ul",null,a.map((function(t){var n=t.id===e.noteMenu.activeTopId;return r.a.createElement("li",{key:t.id,onClick:function(){return T(t.id,t.name)},className:"".concat(x.a.item," ").concat(n?x.a.active:"")},r.a.createElement("div",{className:x.a.shortLogo},t.name.substr(0,1)),r.a.createElement("div",{className:x.a.label},t.name))}))),r.a.createElement("div",{className:x.a.icon},r.a.createElement(j["a"],{onClick:F})),r.a.createElement(v["a"],{visible:s,closable:!1,footer:null,style:{top:20}},r.a.createElement("div",{className:x.a.modal},r.a.createElement("div",{className:x.a.title},r.a.createElement("span",null,"\u7ba1\u7406\u7b14\u8bb0\u672c"),r.a.createElement("div",{className:x.a.buttons},r.a.createElement(i["a"],{type:"text",onClick:k},r.a.createElement(w["a"],null)),r.a.createElement(i["a"],{type:"text",onClick:S},r.a.createElement(I["a"],null)))),r.a.createElement(N["b"],{dataSource:a,renderItem:function(e){return r.a.createElement(N["b"].Item,{actions:[r.a.createElement("a",{onClick:function(){A(e)}},"edit"),r.a.createElement("a",{onClick:function(){R(e.id)}},"delete")]},e.name)}}))),r.a.createElement(P,{onCancel:H,note:y,modalVisible:E}))};return q()},z=Object(l["b"])((function(e){var t=e.note,n=e.noteMenu,a=e.loading;return{note:t,noteMenu:n,loading:a}}))(U),K=v["a"].confirm,X=[{id:"open",name:"\u6700\u8fd1\u6253\u5f00",icon:r.a.createElement(b["a"],null)},{id:"favorate",name:"\u6536\u85cf\u5939",icon:r.a.createElement(E["a"],{className:k.a.favorate})}],Y={fontSize:"10px"},Q=function(e,t){var n=Object(o["useState"])(!1),a=Object(p["a"])(n,2),l=a[0],v=a[1],b=Object(o["useState"])(""),E=Object(p["a"])(b,2),M=E[0],N=E[1],O=Object(o["useState"])([]),j=Object(p["a"])(O,2),w=j[0],I=j[1];Object(o["useEffect"])((function(){e.refreshMenu(2)}),[e.noteMenu.activeMenu1Id]),Object(o["useEffect"])((function(){e.refreshMenu(3)}),[e.noteMenu.activeMenu2Id]);var T=function(e){return"favorate"==e.id||"open"==e.id?r.a.createElement(r.a.Fragment,null):r.a.createElement(f["a"],{onClick:function(t){return R(t,e)}},r.a.createElement(f["a"].Item,{key:"add"},"\u589e\u52a0\u5b50\u7b14\u8bb0"),r.a.createElement(f["a"].Item,{key:"del"},"\u5220\u9664"))},x=function(e,t){I(e?w.filter((function(e){return e!=t})):[t].concat(Object(d["a"])(w)))},S=function(t){var n=A(t),a=n.id,o=n.title,r=n.level;"open"!=a&&"favorate"!=a&&e.dispatch({type:"note/queryNote",payload:a}),1==r?(e.dispatch({type:"noteMenu/refreshActiveMenu1Id",payload:{id:a,title:o}}),N("")):2==r?(e.dispatch({type:"noteMenu/refreshActiveMenu2Id",payload:{id:a,title:o}}),N("")):N(a)},F=function(t){t==e.noteMenu.activeMenu1Id?e.dispatch({type:"noteMenu/refreshMenu3",payload:[]}):t==e.noteMenu.activeTopId&&(e.dispatch({type:"noteMenu/refreshMenu2",payload:[]}),e.dispatch({type:"noteMenu/refreshMenu3",payload:[]})),e.onAddNote(t)},A=function(e){var t,n=e.key||e.id,a=e.title||e.name;return t="favorate"==n||"open"==n?1:Object(D["a"])(e.parentIds),Object(m["a"])(Object(m["a"])({},e),{},{id:n,title:a,level:t})},R=function(t,n){var a=t.key,o=A(n),l=o.id,c=o.title,i=o.level;"add"==a||"del"==a&&K({title:"\u786e\u5b9a\u8981\u5220\u9664 ".concat(c,"?"),icon:r.a.createElement(_["a"],null),onOk:function(){e.dispatch({type:"note/deleteNote",payload:l}).then((function(){s["a"]["info"]({message:"\u5220\u9664\u6210\u529f"}),e.refreshMenu(i)}))}})},H=function(e){var t=e.level,n=e.id;if(t>=3){if(!e.leaf)return w.includes(n)?r.a.createElement(h["a"],{style:Y,onClick:function(){return x(!0,n)}}):r.a.createElement(g["a"],{style:Y,onClick:function(){return x(!1,n)}})}else if(e.icon)return e.icon},q=function e(t,n){if(t)return r.a.createElement("ul",null,t.map((function(t){var a=A(t),o=a.id,l=a.title,c=a.level,i=void 0===c?0:c,s=(i||0)>=3;return r.a.createElement("li",{key:o},r.a.createElement(u["a"],{overlay:T(t),trigger:["contextMenu"]},r.a.createElement("div",{className:"".concat(k.a.menu1Item," ").concat(n==o?k.a.active:"")},r.a.createElement("div",{className:k.a.label,onClick:function(){return S(t)},style:{paddingLeft:"".concat(s?8*(i-3)+12:12,"px")}},H(a),r.a.createElement("div",{className:k.a.noteTitle},"\xa0\xa0",l),i<=3&&"open"!=o&&"favorate"!=o?r.a.createElement("span",{className:k.a.addChild,onClick:function(e){e.stopPropagation(),e.preventDefault(),F(o)}},r.a.createElement(y["a"],{title:"\u589e\u52a0\u5b50\u7b14\u8bb0"})):""))),!t.children||w.includes(o)?"":e(t.children,n))})))},B=function(){var t=e.noteMenu,n=t.menu1Item,a=t.menu2Item,o=t.menu3Item;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"".concat(k.a.content," ").concat(l?k.a.hidden:k.a.show)},r.a.createElement("div",{className:k.a.fold},r.a.createElement(i["a"],{type:"primary",size:"small",onClick:function(){return v(!l)},shape:"circle",icon:l?r.a.createElement(h["a"],null):r.a.createElement(C["a"],null)})),r.a.createElement("div",{className:k.a.menu},r.a.createElement(z,null),r.a.createElement("div",{className:k.a.menuContent},r.a.createElement("div",{className:k.a.title},e.noteMenu.title1),r.a.createElement("ul",null,q(X,e.noteMenu.activeMenu1Id),r.a.createElement(c["a"],null),q(n,e.noteMenu.activeMenu1Id)),r.a.createElement("div",{className:k.a.button},r.a.createElement(i["a"],{block:!0,onClick:function(){return F(e.noteMenu.activeTopId)}},"\u589e\u52a0"))),a.length>0?r.a.createElement("div",{className:k.a.menuContent},r.a.createElement("div",{className:k.a.title},e.noteMenu.title2),q(a,e.noteMenu.activeMenu2Id),r.a.createElement("div",{className:k.a.button},r.a.createElement(i["a"],{block:!0,onClick:function(){return F(e.noteMenu.activeMenu1Id)}},"\u589e\u52a0"))):"",o.length>0?r.a.createElement("div",{className:k.a.menuContent},r.a.createElement("div",{className:k.a.title},e.noteMenu.title3),q(o,M),r.a.createElement("div",{className:k.a.button},r.a.createElement(i["a"],{block:!0,onClick:function(){return F(e.noteMenu.activeMenu2Id)}},"\u589e\u52a0"))):"")))};return B()},G=Object(l["b"])((function(e){var t=e.note,n=e.noteMenu,a=e.loading;return{note:t,noteMenu:n,loading:a}}))(Q),J=n("uMRc"),Z=n("u2V1"),W=n("ye1Q"),$=n("Gztv"),ee=n.n($),te=n("1M3H"),ne=n.n(te),ae=n("56rK"),oe=n.n(ae),re=(n("i8oR"),new ne.a);oe.a.use(ae["Plugins"].TabInsert,{tabMapValue:1});var le=["header","font-bold","font-italic","font-underline","font-strikethrough","list-unordered","list-ordered","block-quote","block-wrap","block-code-inline","block-code-block","table","image","link","clear","logger","auto-resize","full-screen"],ce=r.a.forwardRef((function(e,t){var n=Object(o["useState"])(""),a=Object(p["a"])(n,2),l=a[0],c=a[1];Object(o["useEffect"])((function(){var t=e.note.showNote.text;c(t?e.note.showNote.text:"")}),[e.note.showNote]);var i=function(t){var n=t.html,a=t.text;console.log("handleEditorChange",n,a),c(a),e.handleChange()},u=function(){console.log("save note",l),e.saveContent(l)},s=function(e,t){var n=new FileReader;n.onload=Object(H["a"])(R.a.mark((function e(){var a,o,r;return R.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=function(e){var t=e.split(","),n=t[0].match(/:(.*?);/)[1],a=atob(t[1]),o=a.length,r=new Uint8Array(o);while(o--)r[o]=a.charCodeAt(o);return new Blob([r],{type:n})},o=a(n.result),console.log(o),e.next=5,Object(B["k"])(n.result);case 5:r=e.sent,r.success?t(r.result):console.log(r.message);case 7:case"end":return e.stop()}}),e)}))),n.readAsDataURL(e)},m=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.a,{value:l,style:{height:"300px"},renderHTML:function(e){return re.render(e)},onChange:i,plugins:le,config:{view:{html:!1}},onImageUpload:s,onBlur:u}),r.a.createElement(oe.a,{value:l,style:{border:0},renderHTML:function(e){return re.render(e)},config:{view:{menu:!1,md:!1}},readOnly:!0}))};return m()})),ie=Object(l["b"])((function(e){var t=e.note,n=e.noteMenu,a=e.loading;return{note:t,noteMenu:n,loading:a}}),null,null,{forwardRef:!0})(ce),ue=F["a"].TextArea,se={0:r.a.createElement(J["a"],{twoToneColor:"#52c41a"}),1:r.a.createElement(Z["a"],{twoToneColor:"#f1c40f"}),2:r.a.createElement(W["a"],null)},me="group",de=r.a.forwardRef((function(e,t){var n=Object(o["useRef"])(),a=Object(o["useRef"])(),l=Object(o["useState"])(""),c=Object(p["a"])(l,2),i=c[0],u=c[1],s=Object(o["useState"])(null),d=Object(p["a"])(s,2),f=d[0],b=d[1],E=Object(o["useState"])(""),_=Object(p["a"])(E,2),h=_[0],g=_[1],y=Object(o["useState"])(!1),C=Object(p["a"])(y,2),M=C[0],k=C[1],N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";document.execCommand(e,!1,t)},O=function(){k(!0)};Object(o["useImperativeHandle"])(t,(function(){return{handleAddNote:function(t){console.log("handleAddNote");var n=Object(D["c"])();b(1);var a={name:"\u65b0\u6587\u6863",parentId:t,id:n};g("\u65b0\u6587\u6863"),e.dispatch({type:"note/refreshShowNote",payload:a})}}}));var j=function(){k(!1)},w=function(e){var t=e.target.value;u(t)},I=function(e){b(1)},T=function(e){g(e.target.value),b(1)};Object(o["useEffect"])((function(){x(e.note.showNote)}),[e.note.showNote]);var x=function(e){console.log("handleShowNote"),g(e.name),n.current.innerHTML=e.text||"",b(0)},S=function(t,n){if(0!=f){var a,o=Object(m["a"])({},e.note.showNote);if(o.id)b(2),o.name=h,"title"==t?a="note/updateNoteTitle":(a="note/updateNoteText",o.text=n),e.dispatch({type:a,payload:o}).then((function(n){if(n){if(o.createTime)"title"==t&&e.refreshMenu(Object(D["a"])(o.parentIds));else{var a=n.result;o=a,e.refreshMenu(Object(D["a"])(a.parentIds))}e.dispatch({type:"openNotes/updateOpenNote",payload:o}),e.note.activeNoteId==o.id&&b(0)}}))}},A=function(e,t){"title"==t?S(t):e.relatedTarget&&e.relatedTarget.getAttribute("group")==me||S(t)},R=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:ee.a.toolbar,onBlur:function(e){return A(e,"content")}},r.a.createElement("div",{className:ee.a.buttons},r.a.createElement("a",{group:me,onClick:O,href:"#"},"code"),r.a.createElement("a",{group:me,onClick:function(){return N("bold")},href:"#"},r.a.createElement("b",null,"Bold")),r.a.createElement("a",{group:me,onClick:function(){return N("italic")},href:"#"},r.a.createElement("em",null,"Italic")),r.a.createElement("a",{group:me,onClick:function(){return N("underline")},href:"#"},r.a.createElement("u",null,r.a.createElement("b",null,"U"))),r.a.createElement("a",{group:me,className:ee.a.yellow,onClick:function(){N("backColor","#FFEB9C"),N("foreColor","#9C6500")},href:"#"},"\u7a81\u51fa"),r.a.createElement("a",{group:me,className:ee.a.green,onClick:function(){N("backColor","#C6EFCE"),N("foreColor","#006100")},href:"#"},"\u4f18\u79c0"),r.a.createElement("a",{group:me,className:ee.a.warning,onClick:function(){N("backColor","#FFC7CE"),N("foreColor","#9C0006")},href:"#"},"\u8b66\u544a"),r.a.createElement("a",{group:me,onClick:function(){return N("removeFormat")},href:"#"},r.a.createElement("b",null,"\u53bb\u9664\u683c\u5f0f")),r.a.createElement("a",{group:me,onClick:function(){return N("insertHorizontalRule")},href:"#"},r.a.createElement("b",null,"\u6c34\u5e73\u7ebf")),r.a.createElement("a",{group:me,onClick:function(){return N("insertHTML","&nbsp;&nbsp;&nbsp;-&nbsp;")},href:"#"},r.a.createElement("b",null,"*")),r.a.createElement("a",{group:me,onClick:function(){return N("indent")},href:"#"},r.a.createElement("b",null,"Tab")),r.a.createElement("a",{group:me,onClick:function(){return N("fontname","Microsoft YaHei")},href:"#"},r.a.createElement("span",{style:{fontFamily:"Microsoft YaHei"}},"\u96c5\u9ed1")),r.a.createElement("a",{group:me,onClick:function(){return N("fontname","SimHei")},href:"#"},r.a.createElement("span",{style:{fontFamily:"SimHei"}},"\u9ed1\u4f53")),r.a.createElement("a",{group:me,onClick:function(){return N("fontname","SimSun")},href:"#"},r.a.createElement("span",{style:{fontFamily:"SimSun"}},"\u5b8b\u4f53")),r.a.createElement("a",{group:me,onClick:function(){return N("fontname","Courier New")},href:"#"},r.a.createElement("div",{style:{display:"inline-block",fontFamily:"Courier New"}},"Font")),r.a.createElement("a",{group:me,onClick:function(){return N("fontname","Comic Sans MS")},href:"#"},r.a.createElement("div",{style:{display:"inline-block",fontFamily:"Comic Sans MS"}},"Font"))),r.a.createElement("div",{className:ee.a.status},se[f])),r.a.createElement("div",{className:ee.a.main},e.children,r.a.createElement("div",{className:ee.a.content},r.a.createElement("div",{className:ee.a.title},r.a.createElement(F["a"],{maxLength:100,ref:a,value:h,onBlur:function(e){return A(e,"title")},onInput:T})),r.a.createElement(ie,{handleChange:I,saveContent:function(e){return S("content",e)}}),"-------------------------------------------------------------------------------------",r.a.createElement("div",{group:me,className:ee.a.text,ref:n,suppressContentEditableWarning:"true",contentEditable:!0}))),r.a.createElement(v["a"],{visible:M,onOk:j,onCancel:function(){return k(!1)}},r.a.createElement("div",{style:{marginBottom:"10px"}},"Source code"),r.a.createElement(ue,{value:i,rows:10,onChange:w})))};return R()})),fe=Object(l["b"])((function(e){var t=e.note,n=e.noteMenu,a=e.loading;return{note:t,noteMenu:n,loading:a}}),null,null,{forwardRef:!0})(de),pe=function(e){var t=Object(o["useRef"])(),n=function(t){var n,a="note/queryChildren";1==t?n=e.noteMenu.activeTopId:2==t?n=e.noteMenu.activeMenu1Id:(t=3,a="note/queryTabTree",n=e.noteMenu.activeMenu2Id),n?e.dispatch({type:a,payload:n}).then((function(n){if(n){var a=n.result;e.dispatch({type:"noteMenu/refreshMenu".concat(t),payload:a})}})):e.dispatch({type:"noteMenu/refreshMenu".concat(t),payload:[]})},l=function(e){t.current.handleAddNote(e)},c=function(){var o=e.loading.effects["note/queryNote"]||e.loading.effects["note/deleteNote"]||e.loading.effects["note/queryTabTree"]||e.loading.effects["note/queryChildren"]||!1;return r.a.createElement(a["a"],{spinning:o},r.a.createElement(fe,{ref:t,refreshMenu:n},r.a.createElement(G,{refreshMenu:n,onAddNote:l})))};return c()};t["default"]=Object(l["b"])((function(e){var t=e.note,n=e.noteMenu,a=e.loading;return{note:t,noteMenu:n,loading:a}}))(pe)}}]);