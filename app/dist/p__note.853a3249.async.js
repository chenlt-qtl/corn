(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"0db5":function(e,t,a){e.exports={container:"container___WsyHI",list:"list___3tCLx",toolbar:"toolbar___2_BY_",title:"title___2yx3-"}},"0pL4":function(e,t,a){e.exports={container:"container___1VGr-",list:"list___2eEcA",menuItem:"menuItem___P2Kdu",menu:"menu___3K7_5",noteTitle:"noteTitle___27vxM",active:"active___nuHWV"}},"3eer":function(e,t,a){e.exports={main:"main___szT1f",tabPane:"tabPane___2IdiP",btn:"btn___OfdW7",toggler:"toggler___1YkjS",active:"active___1tAVZ",menuBtn:"menuBtn___1NwFz",menuActive:"menuActive___1Smsu",tab:"tab___1chI2",title:"title___AsEuC",buttons:"buttons___3ckzr",content:"content___20fv5",fav:"fav___1iMS-",isMobile:"isMobile___3xC2E",toolbar:"toolbar___JdnWx"}},"G/16":function(e,t,a){e.exports={nt_main:"nt_main___1tADI",nt_container:"nt_container___1XEhm",nt_content:"nt_content___2Ia9W",nt_isMobile:"nt_isMobile___2bsKH"}},"L+oi":function(e,t,a){e.exports=a.p+"static/diamond.fded64d5.svg"},MjzT:function(e,t,a){"use strict";a.r(t);var n=a("tJVT"),c=a("q1tI"),o=a.n(c),r=a("9kvl"),i=a("G/16"),l=a.n(i),s=(a("qVdP"),a("jsC+")),u=(a("+L6B"),a("2/Rp")),d=a("9og8"),m=(a("/xke"),a("TeRw")),f=(a("lUTK"),a("BvKs")),p=(a("2qtc"),a("kLXV")),_=a("WmNS"),v=a.n(_),b=a("RCxd"),h=a("uqfK"),E=a("GZ0F"),y=a("0db5"),N=a.n(y),O=a("KDh5"),j=(a("5NDa"),a("5rEg")),g=a("jrin"),k=a("k1fw"),I=(a("y8nQ"),a("Vl3Y")),x=a("mAF4"),w=a("7rd8"),S=a("xvlK"),C=a("mcit"),T=a.n(C),M=a("QfEt"),L=a("c+yx"),P=I["a"].Item,D={},K=function(e,t){var a=Object(c["useState"])(!1),r=Object(n["a"])(a,2),i=r[0],l=r[1],m=I["a"].useForm(),_=Object(n["a"])(m,1),b=_[0];if(e.visible&&!i){l(!0);var h=e.node||{};b.setFieldsValue({foldName:h.name}),D=Object(k["a"])({id:h.key},h)}var E=function(t){var a=t.key;if("1"==a)l(!0),b.setFieldsValue({foldName:""}),D={parentId:e.note.listParentNote.id,isLeaf:!1};else{var n={id:Object(L["d"])(),name:"\u65b0\u6587\u6863",parentId:e.note.listParentNote.id,isLeaf:!0,isNew:!0};e.dispatch({type:"note/refreshOpenedNotes",payload:Object(k["a"])(Object(k["a"])({},e.note.openedNotes),{},Object(g["a"])({},n.id,n))}),e.dispatch({type:"note/refreshOpenedNoteId",payload:n.id}),e.isMobile&&e.dispatch({type:"note/refreshShowMenu",payload:!1})}},y=o.a.createElement(f["a"],{onClick:E},o.a.createElement(f["a"].Item,{key:"1",icon:o.a.createElement(x["a"],null)},"\u6587\u4ef6\u5939"),o.a.createElement(f["a"].Item,{key:"2",icon:o.a.createElement(w["a"],null)},"\u7b14\u8bb0")),N=function(){var t=Object(d["a"])(v.a.mark((function t(){var a,n;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b.validateFields();case 2:a=t.sent,n=a.foldName,e.dispatch({type:"note/updateNoteTitle",payload:Object(k["a"])(Object(k["a"])({},D),{},{name:n})}),e.onCancel(),l(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){return o.a.createElement("div",{className:e.className},o.a.createElement("div",{className:T.a.toolbar},o.a.createElement(s["a"],{overlay:y,trigger:["click"]},o.a.createElement(u["a"],{type:"primary",shape:"round",icon:o.a.createElement(S["a"],null)},"\u589e\u52a0"))),o.a.createElement(p["a"],{title:"\u8bf7\u8f93\u5165\u6587\u4ef6\u5939\u540d\u79f0...",visible:i,onOk:N,onCancel:function(){e.onCancel(),l(!1)}},o.a.createElement(I["a"],{form:b},o.a.createElement(P,{name:"foldName",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6587\u4ef6\u5939\u540d\u79f0!"}]},o.a.createElement(j["a"],{prefix:o.a.createElement(x["a"],null)})))))};return O()},R=Object(M["a"])(Object(r["b"])((function(e){var t=e.note,a=e.loading;return{note:t,loading:a}}))(K)),B=a("oBTY"),F=a("lkk+"),H=a("/MfK"),q=a("0pL4"),A=a.n(q),V=p["a"].confirm,z=50,J=function(e,t){var a=Object(c["useState"])(!1),r=Object(n["a"])(a,2),i=r[0],l=r[1],s=Object(c["useState"])(1),d=Object(n["a"])(s,2),f=d[0],p=d[1],_=Object(c["useState"])([]),v=Object(n["a"])(_,2),h=v[0],E=v[1],y=Object(c["useState"])(!1),N=Object(n["a"])(y,2),O=N[0],j=N[1];Object(c["useEffect"])((function(){g(1)}),[e.params]);var g=function(t){var a=e.getDataMethod,n=e.params;a&&(j(!0),a(Object(k["a"])(Object(k["a"])({pageSize:z},n),{},{pageNo:t})).then((function(e){var a,n=e.result,c=e.success;if(j(!1),c){if(n instanceof Array)a=n;else{var o=n.records,r=n.total,i=n.current;a=1==i?o:[].concat(Object(B["a"])(h),Object(B["a"])(o));var s=r>a.length;l(s),p(t)}I(a)}})))};Object(c["useEffect"])((function(){I(h)}),[e.sortType]);var I=function(t){var a=e.sortType;a&&("default"==a?t=t.sort((function(e,t){return e.isLeaf-t.isLeaf})):"date"==a?t=t.sort((function(e,t){return e.updateTime<t.updateTime?1:-1})):"name"==a&&(t=t.sort((function(e,t){return e.name>t.name})))),E(Object(B["a"])(t))},w=function(t){var a=e.isMobile;if(t.isLeaf){var n=e.note.openedNoteId;n!=t.id&&e.dispatch({type:"note/openNote",payload:t.id}),a&&e.dispatch({type:"note/refreshShowMenu",payload:!1})}else{var c=e.note.listParentNote;c.id!=t.id&&e.dispatch({type:"note/refreshListParentNote",payload:t})}},S=function(t,a){t.preventDefault(),t.stopPropagation(),V({title:"\u786e\u5b9a\u8981\u5220\u9664 ".concat(a.name,"?"),icon:o.a.createElement(b["a"],null),onOk:function(){e.dispatch({type:"note/deleteNote",payload:a}).then((function(){m["default"]["info"]({message:"\u5220\u9664\u6210\u529f"}),g(1)}))}})},C=function(e){var t=e.key||e.id,a=e.title||e.name;return Object(k["a"])(Object(k["a"])({},e),{},{id:t,title:a})},T=function(){g(f+1)},M=function(){var t=e.note.openedNoteId,a=e.data,n=void 0===a?h:a,c=e.noDelete;return o.a.createElement("div",{className:A.a.container,style:e.style},o.a.createElement("div",{className:A.a.list},o.a.createElement("ul",null," ",n.map((function(e){var a=C(e),n=a.id,r=a.title,i=t==n;return o.a.createElement("li",{key:n},o.a.createElement("div",{className:"".concat(A.a.menuItem," ").concat(i?A.a.active:""),onClick:function(){return w(e)}},e.isLeaf?o.a.createElement(F["a"],null):o.a.createElement(x["a"],null),o.a.createElement("div",{className:A.a.noteTitle,draggable:!0},"\xa0\xa0",r),c?"":o.a.createElement("div",{className:A.a.menu,onClick:function(e){return S(e,a)}},o.a.createElement(H["a"],null))))})),i?o.a.createElement("li",null,o.a.createElement(u["a"],{type:"link",loading:O,onClick:T},"\u52a0\u8f7d\u66f4\u591a")):"")))};return M()},G=Object(M["a"])(Object(r["b"])((function(e){var t=e.note,a=e.loading;return{note:t,loading:a}}))(J)),W=(p["a"].confirm,function(e,t){var a=Object(c["useState"])(!1),r=Object(n["a"])(a,2),i=r[0],l=r[1],m=Object(c["useState"])({}),p=Object(n["a"])(m,2),_=p[0],b=p[1],y=Object(c["useState"])("default"),j=Object(n["a"])(y,2),g=j[0],k=j[1];Object(c["useEffect"])((function(){I()}),[e.note.listParentNote]),Object(c["useEffect"])((function(){I()}),[e.note.listKey]);var I=function(){var t=e.note.listParentNote.id;k("default"),b({parentId:t})},x=function(e){k(e.key)},w=o.a.createElement(f["a"],{onClick:x},o.a.createElement(f["a"].Item,{key:"default"},"\u9ed8\u8ba4\u6392\u5e8f"),o.a.createElement(f["a"].Item,{key:"date"},"\u6309\u65f6\u95f4\u6392\u5e8f"),o.a.createElement(f["a"].Item,{key:"name"},"\u6309\u540d\u79f0\u6392\u5e8f")),S=function(){var t=Object(d["a"])(v.a.mark((function t(){var a,n,c,o,r=arguments;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=r.length>0&&void 0!==r[0]&&r[0],c=e.note.listParentNote.parentId,a||0==c){t.next=7;break}return t.next=5,Object(O["f"])(c);case 5:o=t.sent,n=o.result;case 7:e.dispatch({type:"note/refreshListParentNote",payload:n});case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=function(){var t=e.note.listParentNote,a="0"==t.id;return o.a.createElement("div",{className:N.a.container},o.a.createElement(R,{visible:i,node:{},onCancel:function(){return l(!1)}}),o.a.createElement("div",{className:N.a.toolbar},o.a.createElement(u["a"],{type:"text",disabled:a,onClick:function(){return S()}},o.a.createElement("span",{className:"iconfont"},"\ue7c3")),o.a.createElement("span",{className:N.a.title},t.name||"\u6240\u6709\u7b14\u8bb0"),a?o.a.createElement("div",null):o.a.createElement(u["a"],{type:"text",disabled:a,onClick:function(){return S(!0)}},o.a.createElement(h["a"],null)),o.a.createElement(s["a"],{overlay:w,trigger:["click"]},o.a.createElement(u["a"],{type:"text"},o.a.createElement(E["a"],null)))),o.a.createElement("div",{className:N.a.list},o.a.createElement(G,{getDataMethod:O["e"],params:_,sortType:g})))};return C()}),Q=Object(r["b"])((function(e){var t=e.note,a=e.loading;return{note:t,loading:a}}))(W),Y=(a("Znn+"),a("ZTPi")),U=a("uMRc"),Z=a("u2V1"),X=a("ye1Q"),$=a("p8w8"),ee=a("djQt"),te=a("Tm+p"),ae=a("G3dp"),ne=a("9BLJ"),ce=a("2BaD"),oe=a("3eer"),re=a.n(oe),ie=a("ddak"),le=a.n(ie),se=a("4i/N"),ue=a("ZM0C"),de=(a("i8oR"),a("DlQD")),me=a.n(de),fe=a("FIf5"),pe=a.n(fe),_e=(a("R5gG"),a("fWQN")),ve=a("mtLc"),be=(a("5GOC"),a("JsLm")),he=a("LvDl"),Ee=be["a"].Link,ye=function(){function e(){var t=this;Object(_e["a"])(this,e),this.anchors=void 0,this.tocItems=[],this.i=0,this.reset=function(){t.tocItems=[],t.anchors=[],t.i=0},this.i=0,this.anchors=[],this.tocItems=[]}return Object(ve["a"])(e,[{key:"add",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=(a||e)+this.i++;this.anchors.push(n);var c={anchor:n,level:t,text:e},o=this.tocItems;if(0===o.length)o.push(c);else{var r=Object(he["last"])(o);if(c.level>r.level)for(var i=r.level+1;i<=6;i++){var l=r,s=l.children;if(!s){r.children=[c];break}if(r=Object(he["last"])(s),c.level<=r.level){s.push(c);break}}else o.push(c)}return n}},{key:"renderToc",value:function(e){var t=this;return e.map((function(e){return o.a.createElement(Ee,{key:e.anchor,href:"#".concat(e.anchor),title:e.text},e.children&&t.renderToc(e.children))}))}},{key:"render",value:function(){return o.a.createElement(be["a"],{affix:!1,showInkInFixed:!0},this.renderToc(this.tocItems))}}]),e}(),Ne=new ye,Oe=new me.a.Renderer;Oe.heading=function(e,t,a){var n=Ne.add(e,t);return'<a id="'.concat(n,'" href="#').concat(n,'" class="anchor-fix"><h').concat(t,">").concat(e,"</h").concat(t,"></a>\n")},me.a.setOptions({renderer:Oe,highlight:function(e){return pe.a.highlightAuto(e).value},gfm:!0,pedantic:!1,sanitize:!1,tables:!0,breaks:!1,smartLists:!1,smartypants:!1}),ue["b"].use(ue["a"].TabInsert,{tabMapValue:1});var je="## ",ge=o.a.forwardRef((function(e,t){var a=Object(c["useState"])(""),r=Object(n["a"])(a,2),i=r[0],l=r[1],s=Object(c["useState"])(!1),u=Object(n["a"])(s,2),m=u[0],f=u[1],_=Object(c["useState"])([]),b=Object(n["a"])(_,2),h=b[0],E=b[1],y=Object(c["useState"])(""),N=Object(n["a"])(y,2),j=N[0],g=N[1];Object(c["useEffect"])((function(){var t=e.note,a=t.openedNoteId,n=t.openedNotes,c="";a&&(c=n[a].text||""),k(c)}),[e.note.openedNoteId]),Object(c["useEffect"])((function(){"new"==j?l(je):h.forEach((function(e){e.id==j&&l(e.text)}))}),[j]),Object(c["useEffect"])((function(){var t=e.displayIndex;if(t){var a=e.note,n=a.openedNoteId,c=a.openedNotes,o="";n&&(o=c[n].text||""),l(o)}}),[e.displayIndex]);var k=function(t){Ne.reset();var a=e.note.openedNoteId,n="\n## ",c=t.indexOf(n),o=0,r=[];while(-1!=c){var i=t.substring(o,c);i.length>0&&r.push({id:a+c,text:i,html:me()(i)}),o=c+1,c=t.indexOf(n,c+1)}var l=t.substring(o,t.length);l.length>0&&r.push({id:a+t.length,text:l,html:me()(l)}),E(r)},I=function(t){t.html;var a=t.text;l(a),e.handleChange()},x=function(){k(i),e.saveContent(i)},w=function(){var t="",a=!1;"new"==j&&i!=je&&(h.push({text:i}),a=!0),h.forEach((function(e){e.id==j?i!=e.text&&(t+=i,a=!0):t+=e.text,t+="\n"})),a&&(k(t),e.saveContent(t)),f(!1),g("")},S=function(e,t){var a=new FileReader;a.onload=Object(d["a"])(v.a.mark((function e(){var n;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["k"])(a.result);case 2:n=e.sent,n.success?t(n.result):console.log(n.message);case 4:case"end":return e.stop()}}),e)}))),a.readAsDataURL(e)},C=function(e){Ne.reset();var t=me()(e);return t},T=function(t){e.note.openedNoteId&&!e.isMobile&&(g(t),f(!0))},M=function(){var t=e.displayIndex,a=e.showToc,n=e.setShowToc,c=e.isMobile;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:le.a.md_container},!c&&a?o.a.createElement("div",{className:le.a.md_toc},o.a.createElement("div",{className:le.a.md_title},o.a.createElement(se["a"],{onClick:function(){n(!1)}})),Ne&&Ne.render()):"",o.a.createElement("div",{className:"".concat(le.a.md_content," ").concat(le.a.md_md)},1==t?o.a.createElement(ue["b"],{value:i,renderHTML:function(e){return me()(e)},onChange:I,onImageUpload:S,onBlur:x,style:{height:"100%"},config:{view:{menu:!0,html:!c,md:!0}}}):o.a.createElement("div",{className:le.a.md_view},h.length>0&&h.map((function(e){return o.a.createElement("div",{key:e.id,dangerouslySetInnerHTML:{__html:e.html},onDoubleClick:function(){return T(e.id)}})})),o.a.createElement("div",{className:le.a.md_restSpace,onDoubleClick:function(){return T("new")}})))),o.a.createElement(p["a"],{title:null,footer:null,visible:m,closable:!1,width:1e3,maskClosable:!0,onCancel:w},o.a.createElement("div",{className:le.a.md_md},o.a.createElement(ue["b"],{value:i,renderHTML:C,onChange:I,onImageUpload:S,config:{view:{menu:!0,html:!0,md:!0}},style:{minHeight:"500px"}}))))};return M()})),ke=Object(M["a"])(Object(r["b"])((function(e){var t=e.note,a=e.loading;return{note:t,loading:a}}),null,null,{forwardRef:!0})(ge)),Ie=(a("H1Ta"),Y["a"].TabPane),xe={0:o.a.createElement(U["a"],{key:"ok",twoToneColor:"#52c41a"}),1:o.a.createElement(Z["a"],{key:"unsave",twoToneColor:"#f1c40f"}),2:o.a.createElement(X["a"],{key:"saving"})},we="group",Se=o.a.forwardRef((function(e,t){var a=Object(c["useRef"])(),r=Object(c["useState"])(0),i=Object(n["a"])(r,2),l=i[0],d=i[1],m=Object(c["useState"])(-1),p=Object(n["a"])(m,2),_=p[0],v=p[1],b=Object(c["useState"])(""),h=Object(n["a"])(b,2),E=h[0],y=h[1],N=Object(c["useState"])(!1),O=Object(n["a"])(N,2),I=O[0],x=O[1],w=Object(c["useState"])(!0),S=Object(n["a"])(w,2),C=S[0],T=S[1];Object(c["useEffect"])((function(){T(!_)}),[_]),Object(c["useEffect"])((function(){var t=e.note,a=t.openedNoteId,n=t.openedNotes;if(a){var c=n[a];c.isNew?v(1):v(0),y(c.name),T(!0)}else y("")}),[e.note.openedNoteId]),Object(c["useImperativeHandle"])(t,(function(){return{handleAddNote:function(t){var a=Object(L["d"])();d(1);var n={name:"\u65b0\u6587\u6863",parentId:t,id:a};y("\u65b0\u6587\u6863"),e.dispatch({type:"note/refreshShowNote",payload:n})}}}));var M=function(e){d(1)},P=function(e){y(e.target.value),d(1)},D=function(t){var a=e.note.openedNoteId;a!=t&&(e.dispatch({type:"note/openNote",payload:t}),v(0),d(0))},K=function(t){var a={},n=e.note,c=n.openedNoteId,o=n.openedNotes;t?e.dispatch({type:"note/refreshOpenedNoteId"}):c&&o[c]&&(a=Object(g["a"])({},c,o[c])),e.dispatch({type:"note/refreshOpenedNotes",payload:a})},R=function(t,a){if(0!=l){var n,c=e.note,o=c.openedNoteId,r=c.openedNotes,i=Object(k["a"])({},r[o]);d(2),i.name=E,"title"==t?n="note/updateNoteTitle":(n="note/updateNoteText",i.text=a),e.dispatch({type:n,payload:i}).then((function(t){t&&e.note.openedNoteId==i.id&&d(0)}))}},B=function(e,t){"title"==t?R(t):e.relatedTarget&&e.relatedTarget.getAttribute("group")==we||R(t)},F=function(t){e.dispatch({type:"note/closeNote",payload:t}),v(0),d(0)},H=function(){var t=e.note,a=t.openedNoteId,n=t.openedNotes;e.dispatch({type:"note/editFav",payload:{noteId:a,isFav:!n[a].fav}})},q=function(){e.dispatch({type:"note/refreshShowMenu",payload:!0})},A=function(){u["a"],$["a"];var t=[],a=e.note,n=a.openedNoteId,c=a.openedNotes;if(n&&c[n])return c[n].fav?t.push(o.a.createElement(u["a"],{key:"noFav",onClick:H,type:"text"},o.a.createElement(ee["a"],{className:re.a.fav}))):t.push(o.a.createElement(u["a"],{key:"fav",onClick:H,type:"text"},o.a.createElement(te["a"],null))),_?t.push(o.a.createElement(u["a"],{key:"edit",type:"text",onClick:function(){v(0)}},o.a.createElement(ne["a"],null))):t.push(o.a.createElement(u["a"],{key:"view",onClick:function(){v(1)},type:"text"},o.a.createElement(ae["a"],null))),t.push(xe[l]),t},V=o.a.createElement(f["a"],{onClick:function(e){return K("1"!==e.key)}},o.a.createElement(f["a"].Item,{key:"1"},"\u5173\u95ed\u5176\u4ed6"),o.a.createElement(f["a"].Item,{key:"2"},"\u5173\u95ed\u6240\u6709")),z=[{icon:"&#xe88c;",name:"three"},{icon:"&#xe8bf;",name:"two"},{icon:"&#xe88e;",name:"one"}],J=(f["a"],function(){var t,n,c=e.isMobile,r=e.note,i=r.openedNoteId,l=r.openedNotes,d=e.menuStyle,m=e.setMenuStyle;e.loading.effects["note/openNote"];return o.a.createElement("div",{className:"".concat(re.a.main," ").concat(c?re.a.isMobile:"")},c?o.a.createElement("div",{className:re.a.toolbar},o.a.createElement(u["a"],{shape:"circle",onClick:q},o.a.createElement("span",{className:"iconfont"},"\ue7c3")),o.a.createElement("div",{className:re.a.buttons},null===(t=A())||void 0===t?void 0:t.map((function(e){return e})))):o.a.createElement("div",{className:re.a.tabPane},o.a.createElement("div",{className:re.a.btn},o.a.createElement("div",{className:re.a.toggler},z.map((function(e){return o.a.createElement("span",{key:e.name,className:"iconfont ".concat(d==e.name?re.a.active:""),dangerouslySetInnerHTML:{__html:e.icon},onClick:function(){return m(e.name)}})})))),o.a.createElement("div",{className:re.a.tab},o.a.createElement(Y["a"],{hideAdd:!0,onTabClick:D,activeKey:i,type:"editable-card",onEdit:F},Object.keys(l).map((function(e){return o.a.createElement(Ie,{tab:l[e].name,key:l[e].id})})))),o.a.createElement("div",{className:re.a.btn},o.a.createElement(s["a"],{overlay:V,onVisibleChange:function(e){x(e)},visible:I},o.a.createElement("div",{className:re.a.closeBtn},o.a.createElement(ce["a"],null))))),o.a.createElement("div",{className:re.a.title},c?"":o.a.createElement(u["a"],{type:"text",onClick:function(){return T(!C)},disabled:!!_},o.a.createElement("span",{className:"iconfont"},"\ue7e3")),o.a.createElement(j["a"],{maxLength:100,ref:a,value:E,onBlur:function(e){return B(e,"title")},onInput:P}),c?"":o.a.createElement("div",{className:re.a.buttons},null===(n=A())||void 0===n?void 0:n.map((function(e){return e})))),o.a.createElement("div",{className:re.a.content},o.a.createElement(ke,{handleChange:M,showToc:C,setShowToc:T,displayIndex:_,saveContent:function(e){return R("content",e)}})))});return J()})),Ce=Object(M["a"])(Object(r["b"])((function(e){var t=e.note,a=e.loading;return{note:t,loading:a}}),null,null,{forwardRef:!0})(Se)),Te=a("L+oi"),Me=a.n(Te),Le=a("lzHC"),Pe=a.n(Le),De=(a("ozfa"),a("MJZm")),Ke=a("yOLg"),Re=a("NT1f"),Be=a("DRyX"),Fe=a("sKr2"),He=a.n(Fe),qe=p["a"].confirm,Ae=De["a"].DirectoryTree,Ve=function(e,t){var a=Object(c["useState"])([]),r=Object(n["a"])(a,2),i=r[0],l=r[1],s=Object(c["useState"])(!1),u=Object(n["a"])(s,2),d=u[0],f=u[1],p=Object(c["useState"])({}),_=Object(n["a"])(p,2),v=_[0],h=_[1],E=Object(c["useState"])([]),y=Object(n["a"])(E,2),N=y[0],j=y[1],g=Object(c["useState"])([]),k=Object(n["a"])(g,2),I=k[0],w=k[1];Object(c["useEffect"])((function(){Object(O["g"])("0",!0).then((function(e){var t=e.result;return w(t)}))}),[]),Object(c["useEffect"])((function(){Object(O["g"])("0",!0).then((function(e){var t=e.result;return w(t)}))}),[e.note.treeKey]),Object(c["useEffect"])((function(){var t=e.note,a=t.openedNoteId,n=t.openedNotes,c=n[a];if(c&&c.parentIds){var o=(c.parentIds||"").split("/");l([a].concat(Object(B["a"])(o)))}j([a])}),[e.note.openedNoteId]);var S=function(e){l(e)},C=function(t,a){var n=a.node,c=n.key,o=n.title,r=n.isLeaf,i=n.parentIds,l=n.parentId;r?e.onNoteClick({id:c,name:o,parentIds:i,isLeaf:r,parentId:l}):(e.dispatch({type:"note/refreshListParentNote",payload:{id:c,name:o}}),j([c]))},T=function(t){qe({title:"\u786e\u5b9a\u8981\u5220\u9664 ".concat(t.title,"?"),icon:o.a.createElement(b["a"],null),onOk:function(){e.dispatch({type:"note/deleteNote",payload:{id:t.key,isLeaf:t.isLeaf,parentIds:t.parentIds,parentId:t.parentId}}).then((function(){m["default"]["info"]({message:"\u5220\u9664\u6210\u529f"})}))}})},M=function(e){f(!0),h(e)},L=function(t){var a=t.node,n=t.dragNode,c=a.key;n&&n.parentId!=c&&n.key!=c&&e.dispatch({type:"note/updateParent",payload:{id:n.key,parentId:c}})},P=function(){e.loading.effects["note/queryMenuTree"];return o.a.createElement("div",{className:He.a.content},o.a.createElement(R,{visible:d,node:v,onCancel:function(){return f(!1)}}),o.a.createElement("div",{className:He.a.tree},o.a.createElement(Ae,{selectedKeys:N,blockNode:!0,multiple:!0,showIcon:!1,expandedKeys:i,treeData:I,onExpand:S,titleRender:function(e){var t,a={color:"rgba(0, 0, 0, 0.5)"};return t=e.isLeaf?o.a.createElement(F["a"],null):i.includes(e.key)?0==e.parentId?o.a.createElement(Ke["a"],{style:a}):o.a.createElement(Re["a"],null):0==e.parentId?o.a.createElement(Be["a"],{style:a}):o.a.createElement(x["a"],null),o.a.createElement("div",{className:He.a.treeNode},o.a.createElement("div",{className:He.a.title},t,e.title),o.a.createElement("div",{className:"noteTreeMenu",onClick:function(t){t.preventDefault(),t.stopPropagation(),M(e)}},o.a.createElement(ae["a"],null)),o.a.createElement("div",{className:"noteTreeMenu delete",onClick:function(t){t.preventDefault(),t.stopPropagation(),T(e)}},o.a.createElement(H["a"],null)))},autoExpandParent:!0,draggable:!0,onSelect:C,onDrop:L})))};return P()},ze=Object(r["b"])((function(e){var t=e.note,a=e.loading;return{note:t,loading:a}}))(Ve),Je=(a("nRaC"),a("5RzL")),Ge=a("l+S1"),We=a("hPJ6"),Qe=a.n(We),Ye=function(e,t){var a=Object(c["useState"])(""),r=Object(n["a"])(a,2),i=r[0],l=r[1],s=Object(c["useState"])(""),u=Object(n["a"])(s,2),d=u[0],m=u[1],f=Object(c["useState"])([]),p=Object(n["a"])(f,2),_=p[0],v=p[1],b=Object(c["useState"])({}),h=Object(n["a"])(b,2),E=h[0],y=h[1];Object(c["useEffect"])((function(){Object(O["g"])("0",!1).then((function(e){var t=e.result;return v(t)}))}),[]),Object(c["useEffect"])((function(){N()}),[d]);var N=function(){var e={parentId:d,searchStr:i,withLeaf:!1};y(e)},g=function(){return o.a.createElement("div",{className:Qe.a.container,style:e.style},o.a.createElement("div",{className:Qe.a.searchBar},o.a.createElement(j["a"],{className:Qe.a.search,value:i,onChange:function(e){return l(e.currentTarget.value)},onPressEnter:N,suffix:o.a.createElement(Ge["a"],null)}),o.a.createElement("div",null,o.a.createElement("label",{className:Qe.a.treeLabel},"\u4f4d\u7f6e :"),o.a.createElement(Je["a"],{style:{width:"100%"},value:d,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:_,placeholder:"Please select",onChange:function(e){return m(e)},allowClear:!0}))),o.a.createElement("div",{className:Qe.a.list},o.a.createElement(G,{getDataMethod:O["c"],params:E})))};return g()},Ue=Object(r["b"])((function(e){var t=e.note,a=e.loading;return{note:t,loading:a}}))(Ye),Ze=a("uqxR"),Xe=a.n(Ze),$e=function(e,t){var a=Object(c["useState"])([]),r=Object(n["a"])(a,2),i=r[0],l=r[1];Object(c["useEffect"])((function(){Object(O["d"])().then((function(e){var t=e.result;return l(t)}))}),[e.note.favKey]);var s=function(){return o.a.createElement("div",{className:Xe.a.container},o.a.createElement(G,{data:i,noDelete:!0}))};return s()},et=Object(r["b"])((function(e){var t=e.note;return{note:t}}))($e),tt=function(e,t){var a=Object(c["useState"])("tree"),r=Object(n["a"])(a,2),i=r[0],l=r[1],s=function(){e.setMenuStyle("two")},u=function(t){"three"!=e.menuStyle&&e.setMenuStyle("three"),l(t)},d=function(t){var a=e.isMobile;if(t.isLeaf){var n=e.note.openedNoteId;n!=t.id&&e.dispatch({type:"note/openNote",payload:t.id}),a&&s()}else{var c=e.note.listParentNote;c.id!=t.id&&e.dispatch({type:"note/refreshListParentNote",payload:t})}},m={tree:{menuType:"tree",icon:"&#xe82d;",text:"\u6587\u4ef6\u5939"},list:{menuType:"list",icon:"&#xe8a8;",text:"\u5217\u8868"},search:{menuType:"search",icon:"&#xe893;",text:"\u641c\u7d22"},fav:{menuType:"fav",icon:"&#xe8b1;",text:"\u6536\u85cf\u5939"}},f=function(){return o.a.createElement("div",{className:"".concat(Pe.a.container," ").concat(Pe.a[e.menuStyle])},o.a.createElement("div",{className:Pe.a.menu},o.a.createElement("span",{className:Pe.a.avatar},o.a.createElement("img",{src:Me.a})),o.a.createElement("ul",null,Object.keys(m).map((function(e){return o.a.createElement("li",{key:e,onClick:function(){return u(e)},className:m[e].menuType==i?Pe.a.active:""},o.a.createElement("span",{className:"iconfont",dangerouslySetInnerHTML:{__html:m[e].icon}}))})))),o.a.createElement("div",{className:Pe.a.content},o.a.createElement("header",{className:Pe.a.header},o.a.createElement("em",{className:Pe.a.closeBtn},o.a.createElement("span",{className:"iconfont",onClick:s},"\ue86a")),m[i]?m[i].text:""),o.a.createElement("article",{className:Pe.a.body},o.a.createElement("div",{className:"tree"==i?Pe.a.show:Pe.a.hide},o.a.createElement(ze,{onNoteClick:d,getDragNote:function(){return dragNote}})),o.a.createElement("div",{className:"list"==i?Pe.a.show:Pe.a.hide},o.a.createElement(Q,{onNoteClick:d,setDragNote:function(){}})),o.a.createElement("div",{className:"search"==i?Pe.a.show:Pe.a.hide},o.a.createElement(Ue,{onNoteClick:d})),o.a.createElement("div",{className:"fav"==i?Pe.a.show:Pe.a.hide},o.a.createElement(et,{onNoteClick:d})))))};return f()},at=Object(r["b"])((function(e){var t=e.note,a=e.loading;return{note:t,loading:a}}))(tt),nt=function(e){var t=Object(c["useState"])("three"),a=Object(n["a"])(t,2),r=a[0],i=a[1],s=function(t){var a=e.isMobile;if(t.isLeaf){var n=e.note.openedNote;n.id!=t.id&&e.dispatch({type:"note/openNote",payload:t.id}),a&&e.dispatch({type:"note/refreshShowMenu",payload:!1})}else{var c=e.note.listParentNote;c.id!=t.id&&e.dispatch({type:"note/refreshListParentNote",payload:t})}},u=function(){var t=e.isMobile;e.loading.effects["note/queryNote"]||e.loading.effects["note/deleteNote"]||e.loading.effects["note/updateNoteTitle"]||e.loading.effects["note/queryTabTree"]||e.loading.effects["note/queryChildren"];return o.a.createElement("div",{className:"".concat(l.a.nt_main," ").concat(t?l.a.nt_isMobile:"")},t?e.note.showMenu?o.a.createElement(Q,{onNoteClick:s,setDragNote:function(e){return e}}):o.a.createElement(Ce,{setMenuStyle:i,menuStyle:r}):o.a.createElement("div",{className:l.a.nt_container},o.a.createElement(at,{setMenuStyle:i,menuStyle:r}),o.a.createElement("div",{className:l.a.nt_content},o.a.createElement(Ce,{setMenuStyle:i,menuStyle:r}))))};return u()};t["default"]=Object(M["a"])(Object(r["b"])((function(e){var t=e.note,a=e.loading;return{note:t,loading:a}}))(nt))},QfEt:function(e,t,a){"use strict";var n=a("0Owb"),c=a("q1tI"),o=a.n(c),r=a("lU33"),i=function(e){return function(t){return o.a.createElement(r["a"],{query:"(max-width:900px)"},(function(a){return o.a.createElement(e,Object(n["a"])({},t,{isMobile:a}))}))}};t["a"]=i},ddak:function(e,t,a){e.exports={md_container:"md_container___39nk9",md_content:"md_content___3tgOx",md_view:"md_view___3rtK0",md_restSpace:"md_restSpace___308Lc",md_toc:"md_toc___1Ifj0",md_title:"md_title___2tgPN",md_md:"md_md___pNTal"}},hPJ6:function(e,t,a){e.exports={container:"container___3qFCj",searchBar:"searchBar___h7W8C",search:"search___30H_5",treeLabel:"treeLabel___1IGyY",list:"list___22CGC"}},lzHC:function(e,t,a){e.exports={nt_main:"nt_main___25fpn",nt_container:"nt_container___3E705",nt_content:"nt_content___3G8D9",nt_isMobile:"nt_isMobile___3I7Jt",container:"container___Ku18n",three:"three___2af9R",two:"two___1psg2",one:"one___5FtEX",menu:"menu___2vaSs",avatar:"avatar___3pPfy",active:"active___1uxcK",content:"content___2uth4",header:"header___3KYU-",closeBtn:"closeBtn___3eWHa",body:"body___1a_BY",show:"show___30Fr5",hide:"hide___2vNBK"}},mcit:function(e,t,a){e.exports={toolbar:"toolbar___2gR-C"}},sKr2:function(e,t,a){e.exports={content:"content___35fWD",tree:"tree___22diT",treeNode:"treeNode___18zdE",treeMenu:"treeMenu___7iaeS",title:"title___3-coS"}},uqxR:function(e,t,a){e.exports={nt_main:"nt_main___5jMJr",nt_container:"nt_container___1ggwo",nt_content:"nt_content___3okhH",nt_isMobile:"nt_isMobile___1f4Qh",container:"container___3aQ7f"}}}]);