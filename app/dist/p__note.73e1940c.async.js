(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"64vn":function(e,t,a){e.exports={layout:"layout___2zGS4",noteTree:"noteTree___2otnc",found:"found___sM1Jg",toolbar:"toolbar___10I07",tree:"tree___fHhRh",openNotes:"openNotes___2o65o",parents:"parents___1iHq1",active:"active___34Wi9",text:"text___2kqvR"}},MjzT:function(e,t,a){"use strict";a.r(t);a("IzEo");var n=a("bx4M"),o=(a("T2oS"),a("W9HT")),r=(a("5NDa"),a("5rEg")),l=(a("miYZ"),a("tsqr")),c=a("k1fw"),s=(a("B9cy"),a("Ol7k")),i=a("q1tI"),u=a.n(i),d=a("64vn"),m=a.n(d),b=a("UYf5"),f=a("oBTY"),v=a("tJVT"),p=(a("Znn+"),a("ZTPi")),E=a("doRY"),h=a.n(E),N=a("bPPy"),_=a("9kvl"),y=a("z3K3"),O=a("uSv2"),g=p["a"].TabPane,j={id:"",name:"\u6700\u8fd1\u6253\u5f00",color:"#f1c40f"},k="#1abc9c",S=function(e){var t=Object(i["useState"])("1"),a=Object(v["a"])(t,2),n=a[0],o=a[1],r=Object(i["useState"])(k),l=Object(v["a"])(r,2),c=l[0],s=l[1],d=Object(i["useState"])([]),m=Object(v["a"])(d,2),b=m[0],E=m[1],S=Object(_["h"])("note",(function(e){var t=e.setSelectedKeys;return{setSelectedKeys:t}})),T=S.setSelectedKeys,D=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k;o(t),a&&s(a),e.onTabChange(t),T([])};Object(i["useEffect"])((function(){Object(N["d"])("0").then((function(e){if(e){var t=e.result;D(j.id,j.color),E([j].concat(Object(f["a"])(t)))}}))}),[]);var w=b.map((function(e){var t=[h.a.item],a={};return n===e.id?(t.push(h.a.active),a.background=c,a.color=c):e.color&&(a.background=e.color,a.color=e.color),u.a.createElement("div",{key:e.id,className:t.join(" "),datatitle:e.name,onClick:function(t){D(e.id,e.color)}},u.a.createElement("div",{style:a},e.name))}));return u.a.createElement("div",{className:h.a.tab},u.a.createElement(p["a"],{defaultActiveKey:"1"},u.a.createElement(g,{tab:u.a.createElement("span",null,u.a.createElement(y["a"],null),"Tab 1"),key:"1"},"Tab 1"),u.a.createElement(g,{tab:u.a.createElement("span",null,u.a.createElement(O["a"],null),"Tab 2"),key:"2"},"Tab 2")),u.a.createElement("div",{className:h.a.label},w),u.a.createElement("div",{className:h.a.content,style:{background:c}},e.children))},T=S,D=(a("ozfa"),a("MJZm")),w=(a("qVdP"),a("jsC+")),C=(a("lUTK"),a("BvKs")),K=a("xvlK"),x=function(e){var t=Object(i["useState"])([]),a=Object(v["a"])(t,2),n=a[0],r=a[1],l=Object(i["useState"])(!0),s=Object(v["a"])(l,2),d=s[0],b=s[1],p=Object(_["h"])("note",(function(e){var t=e.setTreeData,a=e.treeData,n=e.noteData,o=e.treeLoading,r=e.loadNote,l=e.searchValue,c=e.setSearchValue,s=e.selectedKeys,i=e.setSelectedKeys;return{setTreeData:t,treeData:a,noteData:n,treeLoading:o,loadNote:r,searchValue:l,setSearchValue:c,selectedKeys:s,setSelectedKeys:i}})),E=p.setTreeData,h=p.treeData,N=p.noteData,y=p.treeLoading,O=p.loadNote,g=p.searchValue,j=p.setSearchValue,k=p.selectedKeys,S=p.setSelectedKeys,T=function(e){j(e.target.value)},x=u.a.createElement(C["a"],null,u.a.createElement(C["a"].Item,null,u.a.createElement("a",{onClick:e.addRootNote},"\u589e\u52a0\u5206\u533a")),u.a.createElement(C["a"].Item,null,u.a.createElement("a",{onClick:e.addNote},"\u589e\u52a0\u7b14\u8bb0"))),I=function(e){if(13===e.keyCode){b(!0);var t=R(N,g),a=t.keys,n=t.treeData;r(Array.from(new Set(a))),E(n)}},L=function(e){r(e),b(!1)},V=function(e){e.length>0&&(S(e),O(e))},R=function e(t,a){var n=[];if(!a||""===a.trim())return{treeData:t,keys:n};var o=t.reduce((function(t,o){var r=[];if(o.children){var l=e(o.children,a);r=l.treeData,n.push.apply(n,Object(f["a"])(l.keys))}var s=o.name.toLowerCase().indexOf(a.trim().toLowerCase());if(s>-1||r.length>0){var i;if(n.push.apply(n,Object(f["a"])(o.parentIds.split("/"))),s>-1){var d=o.name.substr(0,s),b=o.name.substr(s+a.length);i=u.a.createElement("span",null,d,u.a.createElement("span",{className:m.a.found},a),b)}else i=u.a.createElement("span",null,o.name);r.length>0?t.push(Object(c["a"])(Object(c["a"])({},o),{},{title:i,children:r})):t.push(Object(c["a"])(Object(c["a"])({},o),{},{title:i}))}return t}),[]);return{treeData:o,keys:n}};return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:m.a.toolbar},u.a.createElement("input",{value:g,onChange:T,onKeyUp:I}),u.a.createElement(w["a"],{overlay:x},u.a.createElement("div",null,u.a.createElement(K["a"],null)))),u.a.createElement(o["a"],{spinning:y},u.a.createElement("div",{className:m.a.tree},u.a.createElement(D["a"],{onExpand:L,expandedKeys:n,autoExpandParent:d,treeData:h,onSelect:V,selectedKeys:k}))))},I=x,L=a("4i/N"),V=function(e){var t=Object(_["h"])("note"),a=t.openedNotes,n=t.removeOpenNote,o=t.showNote,r=t.loadNote;return u.a.createElement(u.a.Fragment,null,a.map((function(e){return u.a.createElement("div",{key:e.id,className:e.id===o.id?m.a.active:""},u.a.createElement(L["a"],{onClick:function(){n(e.id)}}),u.a.createElement("span",{onClick:function(){r([e.id])}},e.name,u.a.createElement("span",{className:m.a.parents},e.parents)))})))},R=V,q=s["a"].Sider,P=s["a"].Content,z=function(){var e=Object(i["useRef"])(),t=Object(i["useRef"])(),a=Object(_["h"])("note",(function(e){var t=e.queryOpenedNotes,a=e.showOpenNotes,n=e.onTabChange,o=e.setTreeData,r=e.treeData,l=e.noteData,c=e.showNote,s=e.setShowNote,i=e.noteLoading,u=e.treeLoading,d=e.editNote,m=e.loadNote,b=e.setSearchValue,f=e.tabId;return{queryOpenedNotes:t,showOpenNotes:a,onTabChange:n,setTreeData:o,treeData:r,noteData:l,showNote:c,setShowNote:s,noteLoading:i,treeLoading:u,editNote:d,loadNote:m,setSearchValue:b,tabId:f}})),d=a.queryOpenedNotes,f=a.showOpenNotes,v=a.onTabChange,p=(a.setTreeData,a.treeData,a.noteData,a.showNote),E=a.setShowNote,h=a.noteLoading,N=(a.treeLoading,a.editNote),y=(a.loadNote,a.setSearchValue),O=a.tabId;Object(i["useEffect"])((function(){d()}),[]);var g=function(e){E(Object(c["a"])(Object(c["a"])({},p),{},{name:e.target.value}))},j=function(e){var t=window.tinymce.activeEditor.getContent(),a=Object(c["a"])(Object(c["a"])({},p),{},{text:t});a.id===p.id&&E(a),N(a)},k=function(){var t={parentId:O,name:"\u65b0\u6587\u6863",text:" "};e.current.focus(),E(t)},S=function(){var t={};p&&p.id?(t={parentId:p.id,name:"\u65b0\u6587\u6863",text:" "},e.current.focus(),E(t)):l["b"].error("\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u7b14\u8bb0\u672c")},D=function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(T,{onTabChange:function(e){y(""),v(e)}},u.a.createElement(s["a"],{className:m.a.layout},u.a.createElement(q,{className:m.a.openNotes,style:{display:f?"inline-block":"none"}},u.a.createElement(R,null)),u.a.createElement(q,{className:m.a.noteTree,style:{display:f?"none":"inline-block"}},u.a.createElement(I,{addRootNote:k,addNote:S})),u.a.createElement(P,null,u.a.createElement(n["a"],null,u.a.createElement(o["a"],{spinning:h},u.a.createElement(r["a"],{ref:e,value:p.name,onChange:g,onBlur:N}),u.a.createElement("div",{className:m.a.text},u.a.createElement(b["a"],{ref:t,value:p.text,onBlur:j,init:{height:"100vh",plugins:"table,code,lists,advlist",toolbar:"code | bold italic h2 h3 blockquote forecolor backcolor | bullist numlist | link image",toolbar_sticky:!0,menubar:!1,branding:!1}}))))))))};return D()};t["default"]=z},doRY:function(e,t,a){e.exports={tab:"tab___C4K48",content:"content___2OWfb",label:"label___17N6C",item:"item___31iRZ",active:"active___2RrQb"}}}]);