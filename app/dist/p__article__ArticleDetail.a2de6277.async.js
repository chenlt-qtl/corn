(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"E+aV":function(e,t,a){"use strict";a("2qtc");var n=a("kLXV"),r=a("0Owb"),c=(a("5NDa"),a("5rEg")),l=a("WmNS"),i=a.n(l),u=(a("miYZ"),a("tsqr")),o=a("k1fw"),s=a("9og8"),m=(a("y8nQ"),a("Vl3Y")),p=a("tJVT"),d=a("q1tI"),f=a.n(d),b=a("27j4"),E=a.n(b),O=a("tQT+"),j=a("RyZv"),h=a("E3uV"),v={labelCol:{span:6},wrapperCol:{span:12}},w=f.a.forwardRef((function(e,t){var a=e.modalVisible,l=e.onCancel,b=Object(d["useState"])(""),w=Object(p["a"])(b,2),g=w[0],y=w[1],k=Object(d["useState"])(""),_=Object(p["a"])(k,2),x=_[0],C=_[1],N=Object(d["useState"])({}),S=Object(p["a"])(N,2),T=S[0],V=S[1],I=m["a"].useForm(),F=Object(p["a"])(I,1),L=F[0],q=function(){var e=Object(s["a"])(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,L.validateFields();case 2:if(t=e.sent,t.picture=g,t.mp3=x,!T.id){e.next=12;break}return t=Object(o["a"])(Object(o["a"])({},T),t),e.next=9,Object(O["h"])(t);case 9:a=e.sent,e.next=15;break;case 12:return e.next=14,Object(O["a"])(t);case 14:a=e.sent;case 15:a&&(a.success?(u["b"].success("\u4fdd\u5b58\u6210\u529f!"),l(!0)):u["b"].error(a.message));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(e){y(e)},M=function(e){C(e)};return Object(d["useImperativeHandle"])(t,(function(){return{setFormValue:function(e){var t=e.title,a=e.mp3,n=void 0===a?"":a,r=e.picture,c=void 0===r?"":r,l=e.comment;V(e),L.setFieldsValue({title:t,comment:l}),y(c),C(n)}}}),[]),f.a.createElement(n["a"],{title:"\u589e\u52a0\u6587\u7ae0",visible:a,onCancel:function(){l(!1)},style:{top:20},onOk:q},f.a.createElement(m["a"],Object(r["a"])({},v,{form:L,name:"article"}),f.a.createElement(m["a"].Item,{label:"\u6807\u9898",name:"title",rules:[{required:!0,message:"Please input your title!"}]},f.a.createElement(c["a"],null)),f.a.createElement(m["a"].Item,{label:"\u5c01\u9762",name:"picture"},f.a.createElement(j["a"],{picture:g,onChange:W})),f.a.createElement(m["a"].Item,{label:"\u97f3\u9891",name:"mp3"},f.a.createElement(h["a"],{mp3:x,onChange:M})),f.a.createElement(m["a"].Item,{label:"\u5907\u6ce8",name:"comment"},f.a.createElement(E.a,{rows:4}))))}));t["a"]=w},E3uV:function(e,t,a){"use strict";a("DZo9");var n=a("8z0m"),r=a("jrin"),c=(a("miYZ"),a("tsqr")),l=a("tJVT"),i=a("q1tI"),u=a.n(i),o=a("ye1Q"),s=a("xvlK"),m=(a("H1Ta"),function(e){var t=e.mp3,a=e.onChange;console.log(t);var m=Object(i["useState"])(!1),p=Object(l["a"])(m,2),d=p[0],f=p[1],b=Object(i["useState"])(!0),E=Object(l["a"])(b,2),O=E[0],j=E[1],h=Object(i["useRef"])();function v(e){var t="audio/mpeg"===e.type;t||c["b"].error("You can only upload MP3 file!");var a=e.size/1024/1024<100;return a||c["b"].error("Mp3 must smaller than 100MB!"),t&&a}var w=function(e){"uploading"!==e.file.status?"done"===e.file.status&&(a(e.file.response.result),f(!1)):f(!0)},g=u.a.createElement("div",null,d?u.a.createElement(o["a"],null):u.a.createElement(s["a"],null),u.a.createElement("div",{style:{marginTop:8}},"Upload")),y=function(e,t){e.stopPropagation(),e.preventDefault(),t?h.current.pause():(h.current.load(),h.current.play()),j(t)},k={fontSize:"18px",color:"rgba(0,0,0,0.7)"};return u.a.createElement(u.a.Fragment,null,u.a.createElement(n["a"],{listType:"picture-card",className:"avatar-uploader",showUploadList:!1,headers:Object(r["a"])({},"X-Access-Token",localStorage.getItem("jwToken")||""),action:"/api/sys/common/uploadMp3/word",beforeUpload:v,onChange:w},t?O?u.a.createElement("i",{style:k,className:"fa fa-play",onClick:function(e){y(e,!1)}}):u.a.createElement("i",{style:k,className:"fa fa-pause",onClick:function(e){y(e,!0)}}):g),u.a.createElement("audio",{ref:h},u.a.createElement("source",{src:t,type:"audio/mpeg"}),"\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 audio \u5143\u7d20\u3002"))});t["a"]=m},R9tt:function(e,t,a){e.exports={header:"header___3eNcq",title:"title___37lV9",toolbar:"toolbar___1aGoN",info:"info___Xnybh",left:"left___6RrpR",infoItem:"infoItem___iOwKu",itemLabel:"itemLabel___3ZjXM",itemValue:"itemValue___1Om-b",right:"right___2pfos",img:"img___B5vL8",module:"module___xUOjH",moduleTitle:"moduleTitle___1MT__"}},RyZv:function(e,t,a){"use strict";a("DZo9");var n=a("8z0m"),r=a("jrin"),c=(a("miYZ"),a("tsqr")),l=a("tJVT"),i=a("q1tI"),u=a.n(i),o=a("ye1Q"),s=a("xvlK"),m=function(e){var t=e.picture,a=e.onChange,m=Object(i["useState"])(!1),p=Object(l["a"])(m,2),d=p[0],f=p[1];function b(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||c["b"].error("You can only upload JPG/PNG file!");var a=e.size/1024/1024<2;return a||c["b"].error("Image must smaller than 2MB!"),t&&a}var E=function(e){"uploading"!==e.file.status?"done"===e.file.status&&(console.log(e),a(e.file.response.result),f(!1)):f(!0)},O=u.a.createElement("div",null,d?u.a.createElement(o["a"],null):u.a.createElement(s["a"],null),u.a.createElement("div",{style:{marginTop:8}},"Upload"));return u.a.createElement(u.a.Fragment,null,u.a.createElement(n["a"],{listType:"picture-card",className:"avatar-uploader",showUploadList:!1,headers:Object(r["a"])({},"X-Access-Token",localStorage.getItem("jwToken")||""),action:"/api/sys/common/uploadImg/word",beforeUpload:b,onChange:E},t?u.a.createElement("img",{src:t,alt:"avatar",style:{width:"100%"}}):O))};t["a"]=m},SNxF:function(e,t,a){e.exports={tip:"tip___3Llsv",words:"words___1aSMq",selected:"selected___RhYMy"}},VoJP:function(e,t,a){"use strict";a.r(t);a("2qtc");var n=a("kLXV"),r=(a("+L6B"),a("2/Rp")),c=a("tJVT"),l=a("q1tI"),i=a.n(l),u=a("tQT+"),o=a("R9tt"),s=a.n(o),m=a("G3dp"),p=a("/MfK"),d=a("jhfD"),f=a("E+aV"),b=(a("Mwp2"),a("VXEj")),E=(a("P2fV"),a("NJEC")),O=a("Drea"),j=a("w5pM"),h=a("5CnO"),v=(a("T2oS"),a("W9HT")),w=a("0Owb"),g=a("oBTY"),y=a("WmNS"),k=a.n(y),_=a("k1fw"),x=a("9og8"),C=(a("FJo9"),a("L41K")),N=(a("y8nQ"),a("Vl3Y")),S=(a("5NDa"),a("5rEg")),T=a("SNxF"),V=a.n(T),I=a("RyZv"),F=a("E3uV"),L=S["a"].TextArea,q=N["a"].Item,W=C["a"].Step,M={labelCol:{span:3},wrapperCol:{span:18}},R=function(e){var t=e.modalVisible,a=e.onCancel,o=e.sentence,s=void 0===o?{}:o,m=e.articleId,p=e.single,d=Object(l["useState"])(0),f=Object(c["a"])(d,2),b=f[0],E=f[1],O=Object(l["useState"])([]),j=Object(c["a"])(O,2),h=j[0],y=j[1],S=Object(l["useState"])([]),T=Object(c["a"])(S,2),R=T[0],J=T[1],P=Object(l["useState"])(""),B=Object(c["a"])(P,2),Y=B[0],Z=B[1],z=Object(l["useState"])(""),D=Object(c["a"])(z,2),U=D[0],Q=D[1],X=Object(l["useState"])(!1),K=Object(c["a"])(X,2),A=K[0],G=K[1],H=N["a"].useForm(),$=Object(c["a"])(H,1),ee=$[0],te=/[\n]+/;Object(l["useEffect"])((function(){if(console.log(s),ee.setFieldsValue(s),E(0),s.id){var e=s.picture,t=void 0===e?"":e,a=s.mp3,n=void 0===a?"":a;Z(t),Q(n),G(!0),Object(u["e"])(s.id).then((function(e){if(e&&e.result){var t=e.result.records;y(t.map((function(e){return e.wordName})))}G(!1)}))}}),[s]);var ae=function(){var e=Object(x["a"])(k.a.mark((function e(){var t,a,n;return k.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ee.validateFields();case 2:if(t=e.sent,0!==b){e.next=8;break}E(b+1),ue(t.content),e.next=17;break;case 8:return G(!0),a={id:m},a.sentences=R.map((function(e){return Object(_["a"])(Object(_["a"])({},e),{},{words:e.allWords.filter((function(e){return h.includes(e.text.toLowerCase())})).map((function(e){return{wordName:e.text}}))})})),p&&a.sentences[0]&&(U&&(a.sentences[0].mp3=U),Y&&(a.sentences[0].picture=Y),s.id&&(a.sentences[0].id=s.id)),e.next=14,Object(u["g"])(a);case 14:n=e.sent,n&&ne(!0),G(!1);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(e){a(e)},re=function(){return E(b-1)},ce=function(e){var t=h.indexOf(e.toLowerCase());t>-1?h.splice(t,1):h.push(e.toLowerCase()),y(Object(g["a"])(h))},le=function(e){Z(e)},ie=function(e){Q(e)},ue=function(e){var t=p?[e]:e.split(te),a=[],n=/([a-z|'|-]+)/gi,r=null;J(t.reduce((function(e,t){var a={content:t,allWords:[]},c=1;while(r=n.exec(t)){var l=r[0];a.allWords.push({text:l,isWord:!0}),r.index>c&&a.allWords.push({text:t.slice(c,r.index),isWord:!1}),c=r.index+l.length}return c<t.length&&a.allWords.push({text:t.slice(c),isWord:!1}),e.push(a),e}),a))},oe=function(){return 1===b?i.a.createElement(i.a.Fragment,null,i.a.createElement(r["a"],{onClick:function(){return ne(!1)}},"\u53d6\u6d88"),i.a.createElement(r["a"],{onClick:re},"\u4e0a\u4e00\u6b65"),i.a.createElement(r["a"],{type:"primary",onClick:ae},"\u5b8c\u6210")):i.a.createElement(i.a.Fragment,null,i.a.createElement(r["a"],{onClick:function(){return ne(!1)}},"\u53d6\u6d88"),i.a.createElement(r["a"],{type:"primary",onClick:ae},"\u4e0b\u4e00\u6b65"))},se=0;return i.a.createElement(n["a"],{title:s.id?"\u4fee\u6539\u53e5\u5b50":p?"\u589e\u52a0\u53e5\u5b50":"\u6279\u91cf\u589e\u52a0\u53e5\u5b50",visible:t,onCancel:function(){return ne(!1)},style:{top:20},footer:oe(),onOk:ae},i.a.createElement(v["a"],{spinning:A},i.a.createElement(C["a"],{style:{marginBottom:28},size:"small",current:b},i.a.createElement(W,{title:"\u8f93\u5165\u53e5\u5b50"}),i.a.createElement(W,{title:"\u9009\u62e9\u751f\u8bcd"}),i.a.createElement(W,{title:"\u5b8c\u6210"})),i.a.createElement(N["a"],Object(w["a"])({},M,{form:ee}),0===b?i.a.createElement(i.a.Fragment,null,i.a.createElement(q,{name:"content",label:"\u5185\u5bb9",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5185\u5bb9\uff01"}]},i.a.createElement(L,{rows:p?4:10})),p?i.a.createElement(i.a.Fragment,null,i.a.createElement(q,{name:"picture",label:"\u56fe\u7247"},i.a.createElement(I["a"],{picture:Y,onChange:le})),i.a.createElement(q,{name:"mp3",label:"\u97f3\u9891"},i.a.createElement(F["a"],{mp3:U,onChange:ie}))):i.a.createElement("span",{className:V.a.tip},"\u4e0d\u540c\u53e5\u5b50\u8bf7\u7528\u56de\u8f66\u5206\u9694")):i.a.createElement("div",{className:V.a.words},R.map((function(e){return i.a.createElement("p",{key:++se},e.allWords.map((function(e){var t=e.text,a=e.isWord;return a?i.a.createElement("span",{key:++se,className:h.includes(t.toLowerCase())?V.a.selected:null,onClick:function(){ce(t)}},t):i.a.createElement(l["Fragment"],{key:++se},t,te.test(t)?i.a.createElement("br",{key:++se}):"")})))}))))))},J=R,P=function(e){var t=e.articleId,a=Object(l["useState"])([]),n=Object(c["a"])(a,2),r=n[0],o=n[1],d=Object(l["useState"])({}),f=Object(c["a"])(d,2),v=f[0],w=f[1],g=Object(l["useState"])(!1),y=Object(c["a"])(g,2),k=y[0],_=y[1],x=Object(l["useState"])(!0),C=Object(c["a"])(x,2),N=C[0],S=C[1];Object(l["useEffect"])((function(){T()}),[]);var T=function(){Object(u["d"])(t).then((function(e){e&&e.success&&o(e.result)}))},V=function(e,t){w(e),_(!0),S(t)},I=function(e){},F=function(e){var t=[i.a.createElement(m["a"],{onClick:function(){V(e,!0)}})];return e.mp3&&t.push(i.a.createElement(O["a"],null)),t.push(i.a.createElement(E["a"],{title:"\u786e\u8ba4\u8981\u5220\u9664\u8fd9\u4e2a\u53e5\u5b50?",onConfirm:function(){I(e.id)},okText:"\u662f",cancelText:"\u5426"},i.a.createElement(p["a"],null))),t};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:s.a.module},i.a.createElement("div",{className:s.a.moduleTitle},"\u53e5\u5b50\u5217\u8868"),i.a.createElement("div",{className:s.a.toolbar},i.a.createElement(j["a"],{title:"\u589e\u52a0\u53e5\u5b50",onClick:function(){V({},!0)}}),i.a.createElement(h["a"],{title:"\u6279\u91cf\u589e\u52a0\u53e5\u5b50",onClick:function(){V({},!1)}}))),i.a.createElement(b["b"],{itemLayout:"vertical",size:"large",pagination:!1,dataSource:r,renderItem:function(e){return i.a.createElement(b["b"].Item,{key:e.id,actions:F(e),extra:e.picture?i.a.createElement("img",{width:100,src:e.picture}):""},i.a.createElement("pre",null,e.content))}}),i.a.createElement(J,{articleId:t,sentence:v,single:N,onCancel:function(e){e&&T(),_(!1)},modalVisible:k}))},B=P,Y=function(e){var t=e.match.params.id,a=Object(l["useState"])({}),o=Object(c["a"])(a,2),b=o[0],E=o[1],O=Object(l["useState"])(!1),j=Object(c["a"])(O,2),h=j[0],v=j[1],w=Object(l["useState"])(!1),g=Object(c["a"])(w,2),y=g[0],k=g[1],_=Object(l["useRef"])();Object(l["useEffect"])((function(){x()}),[]);var x=function(){Object(u["b"])(t).then((function(e){e&&e.success&&E(e.result.article)}))},C=function(){_.current.setFormValue(b),k(!0)};return i.a.createElement(i.a.Fragment,null,i.a.createElement("main",{className:s.a.main},i.a.createElement("header",{className:s.a.header},i.a.createElement("div",{className:s.a.title},i.a.createElement("h1",null,b.title)),i.a.createElement("div",{className:s.a.toolbar},i.a.createElement(d["a"],null),i.a.createElement(m["a"],{onClick:C}),i.a.createElement(p["a"],null))),i.a.createElement("div",{className:s.a.info},i.a.createElement("div",{className:s.a.left},b.mp3?i.a.createElement("div",{className:s.a.infoItem},i.a.createElement("audio",{controls:!0},i.a.createElement("source",{src:b.mp3,type:"audio/mpeg"}),"\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 audio \u5143\u7d20\u3002")):"",i.a.createElement("div",{className:s.a.infoItem},i.a.createElement("div",{className:s.a.itemLabel},"\u53e5\u5b50\u6570"),i.a.createElement("div",{className:s.a.itemValue},"0")),i.a.createElement("div",{className:s.a.infoItem},i.a.createElement("div",{className:s.a.itemLabel},"\u5355\u8bcd\u6570"),i.a.createElement("div",{className:s.a.itemValue},"0"))),b.picture?i.a.createElement("a",{target:"_blank",className:s.a.right,href:b.picture},i.a.createElement("img",{className:s.a.img,src:b.picture})):""),i.a.createElement(B,{articleId:t})),i.a.createElement(n["a"],{title:"\u67e5\u770b\u56fe\u7247",width:660,visible:h,onCancel:function(){v(!1)},footer:i.a.createElement(r["a"],{onClick:function(){v(!1)}},"\u5173\u95ed")},i.a.createElement("img",{width:600,src:b.picture})),i.a.createElement(f["a"],{ref:_,onCancel:function(e){k(!1),e&&x()},modalVisible:y}))};t["default"]=Y},"tQT+":function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"d",(function(){return s})),a.d(t,"b",(function(){return p})),a.d(t,"f",(function(){return f})),a.d(t,"a",(function(){return E})),a.d(t,"g",(function(){return j})),a.d(t,"h",(function(){return v})),a.d(t,"e",(function(){return g}));var n=a("k1fw"),r=a("WmNS"),c=a.n(r),l=a("9og8"),i=a("9kvl");function u(e){return o.apply(this,arguments)}function o(){return o=Object(l["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["g"])("/api/word/article/list",{params:t}));case 1:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function s(e){return m.apply(this,arguments)}function m(){return m=Object(l["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["g"])("/api/word/sentence/listByArticle?articleId="+t));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function p(e){return d.apply(this,arguments)}function d(){return d=Object(l["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["g"])("/api/word/article/queryById?id="+t));case 1:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function f(e){return b.apply(this,arguments)}function b(){return b=Object(l["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["g"])("/api/word/article/delete?id="+t,{method:"DELETE"}));case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function E(e){return O.apply(this,arguments)}function O(){return O=Object(l["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["g"])("/api/word/article/add",{method:"POST",data:Object(n["a"])(Object(n["a"])({},t),{},{method:"post"})}));case 1:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function j(e){return h.apply(this,arguments)}function h(){return h=Object(l["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["g"])("/api/word/sentence/save",{method:"POST",data:Object(n["a"])(Object(n["a"])({},t),{},{method:"post"})}));case 1:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function v(e){return w.apply(this,arguments)}function w(){return w=Object(l["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["g"])("/api/word/article/edit",{method:"PUT",data:Object(n["a"])(Object(n["a"])({},t),{},{method:"put"})}));case 1:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function g(e){return y.apply(this,arguments)}function y(){return y=Object(l["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["g"])("/api/word/word/queryBySentence?id="+t));case 1:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}}}]);