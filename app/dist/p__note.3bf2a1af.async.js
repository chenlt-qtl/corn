(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"64vn":function(e,t,a){e.exports={out:"out___1NJRG",layout:"layout___2zGS4",noteTree:"noteTree___2otnc",found:"found___sM1Jg",toolbar:"toolbar___10I07",tree:"tree___fHhRh",openNotes:"openNotes___2o65o",parents:"parents___1iHq1",active:"active___34Wi9",text:"text___2kqvR",content:"content___3GbIN"}},MjzT:function(e,t,a){"use strict";a.r(t);a("T2oS");var n=a("W9HT"),o=(a("5NDa"),a("5rEg")),r=(a("miYZ"),a("tsqr")),c=a("k1fw"),l=(a("B9cy"),a("Ol7k")),s=a("q1tI"),i=a.n(s),u=a("64vn"),d=a.n(u),m=a("UYf5"),b=a("oBTY"),f=a("tJVT"),h=(a("Znn+"),a("ZTPi")),p=a("bPPy"),v=a("9kvl"),N=a("2PG1"),E=h["a"].TabPane,y={id:"",name:"\u6700\u8fd1\u6253\u5f00"},O=function(e){var t=Object(s["useState"])("1"),a=Object(f["a"])(t,2),n=a[0],o=a[1],r=Object(s["useState"])([]),c=Object(f["a"])(r,2),l=c[0],u=c[1],d=Object(v["h"])("note",(function(e){var t=e.setSelectedKeys;return{setSelectedKeys:t}})),m=d.setSelectedKeys,O=function(t){o(t),e.onTabChange(t),m([])};return Object(s["useEffect"])((function(){Object(p["d"])("0").then((function(e){if(e){console.log(e);var t=e.result;O(y.id,y.color),u([y].concat(Object(b["a"])(t)))}}))}),[]),i.a.createElement("div",null,i.a.createElement(h["a"],{defaultActiveKey:n,onChange:O},l.map((function(e,t){return i.a.createElement(E,{key:e.id,tab:i.a.createElement("span",null,t>0?"":i.a.createElement(N["a"],null),e.name)})}))),i.a.createElement("div",null,e.children))},g=O,_=(a("ozfa"),a("MJZm")),j=(a("qVdP"),a("jsC+")),w=(a("lUTK"),a("BvKs")),D=a("xvlK"),S=function(e){var t=Object(s["useState"])([]),a=Object(f["a"])(t,2),o=a[0],r=a[1],l=Object(s["useState"])(!0),u=Object(f["a"])(l,2),m=u[0],h=u[1],p=Object(v["h"])("note",(function(e){var t=e.setTreeData,a=e.treeData,n=e.noteData,o=e.treeLoading,r=e.loadNote,c=e.searchValue,l=e.setSearchValue,s=e.selectedKeys,i=e.setSelectedKeys;return{setTreeData:t,treeData:a,noteData:n,treeLoading:o,loadNote:r,searchValue:c,setSearchValue:l,selectedKeys:s,setSelectedKeys:i}})),N=p.setTreeData,E=p.treeData,y=p.noteData,O=p.treeLoading,g=p.loadNote,S=p.searchValue,k=p.setSearchValue,T=p.selectedKeys,C=p.setSelectedKeys,K=function(e){k(e.target.value)},x=i.a.createElement(w["a"],null,i.a.createElement(w["a"].Item,null,i.a.createElement("a",{onClick:e.addRootNote},"\u589e\u52a0\u5206\u533a")),i.a.createElement(w["a"].Item,null,i.a.createElement("a",{onClick:e.addNote},"\u589e\u52a0\u7b14\u8bb0"))),I=function(e){if(13===e.keyCode){h(!0);var t=q(y,S),a=t.keys,n=t.treeData;r(Array.from(new Set(a))),N(n)}},L=function(e){r(e),h(!1)},V=function(e){e.length>0&&(C(e),g(e))},q=function e(t,a){var n=[];if(!a||""===a.trim())return{treeData:t,keys:n};var o=t.reduce((function(t,o){var r=[];if(o.children){var l=e(o.children,a);r=l.treeData,n.push.apply(n,Object(b["a"])(l.keys))}var s=o.name.toLowerCase().indexOf(a.trim().toLowerCase());if(s>-1||r.length>0){var u;if(n.push.apply(n,Object(b["a"])(o.parentIds.split("/"))),s>-1){var m=o.name.substr(0,s),f=o.name.substr(s+a.length);u=i.a.createElement("span",null,m,i.a.createElement("span",{className:d.a.found},a),f)}else u=i.a.createElement("span",null,o.name);r.length>0?t.push(Object(c["a"])(Object(c["a"])({},o),{},{title:u,children:r})):t.push(Object(c["a"])(Object(c["a"])({},o),{},{title:u}))}return t}),[]);return{treeData:o,keys:n}};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:d.a.toolbar},i.a.createElement("input",{value:S,onChange:K,onKeyUp:I}),i.a.createElement(j["a"],{overlay:x},i.a.createElement("div",null,i.a.createElement(D["a"],null)))),i.a.createElement(n["a"],{spinning:O},i.a.createElement("div",{className:d.a.tree},i.a.createElement(_["a"],{onExpand:L,expandedKeys:o,autoExpandParent:m,treeData:E,onSelect:V,selectedKeys:T}))))},k=S,T=a("4i/N"),C=function(e){var t=Object(v["h"])("note"),a=t.openedNotes,n=t.removeOpenNote,o=t.showNote,r=t.loadNote;return i.a.createElement(i.a.Fragment,null,a.map((function(e){return i.a.createElement("div",{key:e.id,className:e.id===o.id?d.a.active:""},i.a.createElement(T["a"],{onClick:function(){n(e.id)}}),i.a.createElement("span",{onClick:function(){r([e.id])}},e.name,i.a.createElement("span",{className:d.a.parents},e.parents)))})))},K=C,x=l["a"].Sider,I=l["a"].Content,L=function(){var e=Object(s["useRef"])(),t=Object(s["useRef"])(),a=Object(v["h"])("note",(function(e){var t=e.queryOpenedNotes,a=e.showOpenNotes,n=e.onTabChange,o=e.setTreeData,r=e.treeData,c=e.noteData,l=e.showNote,s=e.setShowNote,i=e.noteLoading,u=e.treeLoading,d=e.editNote,m=e.loadNote,b=e.setSearchValue,f=e.tabId;return{queryOpenedNotes:t,showOpenNotes:a,onTabChange:n,setTreeData:o,treeData:r,noteData:c,showNote:l,setShowNote:s,noteLoading:i,treeLoading:u,editNote:d,loadNote:m,setSearchValue:b,tabId:f}})),u=a.queryOpenedNotes,b=a.showOpenNotes,f=a.onTabChange,h=(a.setTreeData,a.treeData,a.noteData,a.showNote),p=a.setShowNote,N=a.noteLoading,E=(a.treeLoading,a.editNote),y=(a.loadNote,a.setSearchValue),O=a.tabId;Object(s["useEffect"])((function(){u()}),[]);var _=function(e){p(Object(c["a"])(Object(c["a"])({},h),{},{name:e.target.value}))},j=function(e){var t=window.tinymce.activeEditor.getContent(),a=Object(c["a"])(Object(c["a"])({},h),{},{text:t});a.id===h.id&&p(a),E(a)},w=function(){var t={parentId:O,name:"\u65b0\u6587\u6863",text:" "};e.current.focus(),p(t)},D=function(){var t={};h&&h.id?(t={parentId:h.id,name:"\u65b0\u6587\u6863",text:" "},e.current.focus(),p(t)):r["b"].error("\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u7b14\u8bb0\u672c")},S=function(){return i.a.createElement("div",{className:d.a.out},i.a.createElement(g,{onTabChange:function(e){y(""),f(e)}},i.a.createElement(l["a"],{className:d.a.layout},i.a.createElement(x,{className:d.a.openNotes,width:300,style:{display:b?"inline-block":"none"}},i.a.createElement(K,null)),i.a.createElement(x,{className:d.a.noteTree,width:300,style:{display:b?"none":"inline-block"}},i.a.createElement(k,{addRootNote:w,addNote:D})),i.a.createElement(I,{className:d.a.content},i.a.createElement(n["a"],{spinning:N},i.a.createElement(o["a"],{ref:e,value:h.name,onChange:_,onBlur:E}),i.a.createElement("div",{className:d.a.text},i.a.createElement(m["a"],{ref:t,value:h.text,onBlur:j,init:{height:"100vh",plugins:"table,code,lists,advlist",toolbar:"code | bold italic h2 h3 blockquote forecolor backcolor | bullist numlist | link image",toolbar_sticky:!0,menubar:!1,branding:!1}})))))))};return S()};t["default"]=L}}]);